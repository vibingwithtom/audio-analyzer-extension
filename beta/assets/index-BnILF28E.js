var Qr=Object.defineProperty;var Yn=t=>{throw TypeError(t)};var es=(t,e,n)=>e in t?Qr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var it=(t,e,n)=>es(t,typeof e!="symbol"?e+"":e,n),vn=(t,e,n)=>e.has(t)||Yn("Cannot "+n);var d=(t,e,n)=>(vn(t,e,"read from private field"),n?n.call(t):e.get(t)),D=(t,e,n)=>e.has(t)?Yn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),y=(t,e,n,r)=>(vn(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),M=(t,e,n)=>(vn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const ur=!1;var on=Array.isArray,ts=Array.prototype.indexOf,Rn=Array.from,Zt=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,cr=Object.getOwnPropertyDescriptors,ns=Object.prototype,rs=Array.prototype,Cn=Object.getPrototypeOf,Wn=Object.isExtensible;const xe=()=>{};function ss(t){return t()}function Qt(t){for(var e=0;e<t.length;e++)t[e]()}function fr(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}function is(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const W=2,dr=4,an=8,tt=16,ke=32,nt=64,Fn=128,se=256,en=512,L=1024,X=2048,Ae=4096,fe=8192,rt=16384,Pn=32768,ln=65536,Jn=1<<17,os=1<<18,kt=1<<19,hr=1<<20,bn=1<<21,un=1<<22,Ke=1<<23,dt=Symbol("$state"),as=Symbol("legacy props"),ls=Symbol(""),Ot=new class extends Error{constructor(){super(...arguments);it(this,"name","StaleReactionError");it(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function us(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function cs(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ds(t){throw new Error("https://svelte.dev/e/effect_orphan")}function hs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function vs(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function gs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ps(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function _s(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ws(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const cn=1,fn=2,vr=4,bs=8,ms=16,ys=1,Ss=2,Es=4,xs=8,Is=16,ks=1,As=2,N=Symbol(),Ts="http://www.w3.org/1999/xhtml";function $s(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Os=!1;function gr(t){return t===this.v}function pr(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function _r(t){return!pr(t,this.v)}let Nt=!1,Ds=!1;function Rs(){Nt=!0}let F=null;function yt(t){F=t}function Lt(t,e=!1,n){F={p:F,c:null,e:null,s:t,x:null,l:Nt&&!e?{s:null,u:null,$:[]}:null}}function Mt(t){var e=F,n=e.e;if(n!==null){e.e=null;for(var r of n)Dr(r)}return F=e.p,{}}function Ut(){return!Nt||F!==null&&F.l===null}let lt=[];function Cs(){var t=lt;lt=[],Qt(t)}function St(t){if(lt.length===0){var e=lt;queueMicrotask(()=>{e===lt&&Cs()})}lt.push(t)}const Fs=new WeakMap;function wr(t){var e=k;if(e===null)return E.f|=Ke,t;if((e.f&Pn)===0){if((e.f&Fn)===0)throw!e.parent&&t instanceof Error&&br(t),t;e.b.error(t)}else Et(t,e)}function Et(t,e){for(;e!==null;){if((e.f&Fn)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&br(t),t}function br(t){const e=Fs.get(t);e&&(Zt(t,"message",{value:e.message}),Zt(t,"stack",{value:e.stack}))}const Yt=new Set;let B=null,mn=new Set,Ce=[],Bn=null,yn=!1;var pt,_t,Ve,Bt,wt,bt,He,mt,qt,jt,oe,Sn,Jt,En;const ct=class ct{constructor(){D(this,oe);it(this,"current",new Map);D(this,pt,new Map);D(this,_t,new Set);D(this,Ve,0);D(this,Bt,null);D(this,wt,[]);D(this,bt,[]);D(this,He,[]);D(this,mt,[]);D(this,qt,[]);D(this,jt,[]);it(this,"skipped_effects",new Set)}process(e){Ce=[];var n=ct.apply(this);for(const i of e)M(this,oe,Sn).call(this,i);if(d(this,Ve)===0){M(this,oe,En).call(this);var r=d(this,bt),s=d(this,He);y(this,bt,[]),y(this,He,[]),y(this,mt,[]),B=null,Kn(r),Kn(s),d(this,Bt)?.resolve()}else M(this,oe,Jt).call(this,d(this,bt)),M(this,oe,Jt).call(this,d(this,He)),M(this,oe,Jt).call(this,d(this,mt));n();for(const i of d(this,wt))It(i);y(this,wt,[])}capture(e,n){d(this,pt).has(e)||d(this,pt).set(e,n),this.current.set(e,e.v)}activate(){B=this}deactivate(){B=null}flush(){if(Ce.length>0){if(this.activate(),Ps(),B!==null&&B!==this)return}else d(this,Ve)===0&&M(this,oe,En).call(this);this.deactivate();for(const e of mn)if(mn.delete(e),e(),B!==null)break}increment(){y(this,Ve,d(this,Ve)+1)}decrement(){y(this,Ve,d(this,Ve)-1);for(const e of d(this,qt))U(e,X),Qe(e);for(const e of d(this,jt))U(e,Ae),Qe(e);this.flush()}add_callback(e){d(this,_t).add(e)}settled(){return(d(this,Bt)??y(this,Bt,fr())).promise}static ensure(){if(B===null){const e=B=new ct;Yt.add(B),ct.enqueue(()=>{B===e&&e.flush()})}return B}static enqueue(e){St(e)}static apply(e){return xe}};pt=new WeakMap,_t=new WeakMap,Ve=new WeakMap,Bt=new WeakMap,wt=new WeakMap,bt=new WeakMap,He=new WeakMap,mt=new WeakMap,qt=new WeakMap,jt=new WeakMap,oe=new WeakSet,Sn=function(e){e.f^=L;for(var n=e.first;n!==null;){var r=n.f,s=(r&(ke|nt))!==0,i=s&&(r&L)!==0,o=i||(r&fe)!==0||this.skipped_effects.has(n);if(!o&&n.fn!==null){s?n.f^=L:(r&dr)!==0?d(this,He).push(n):(r&L)===0&&((r&un)!==0&&n.b?.is_pending()?d(this,wt).push(n):Ht(n)&&((n.f&tt)!==0&&d(this,mt).push(n),It(n)));var l=n.first;if(l!==null){n=l;continue}}var a=n.parent;for(n=n.next;n===null&&a!==null;)n=a.next,a=a.parent}},Jt=function(e){for(const n of e)((n.f&X)!==0?d(this,qt):d(this,jt)).push(n),U(n,L);e.length=0},En=function(){var e;for(const n of d(this,_t))n();if(d(this,_t).clear(),Yt.size>1){d(this,pt).clear();let n=!0;for(const r of Yt){if(r===this){n=!1;continue}for(const[s,i]of this.current){if(r.current.has(s))if(n)r.current.set(s,i);else continue;mr(s)}if(Ce.length>0){B=r;const s=ct.apply(r);for(const i of Ce)M(e=r,oe,Sn).call(e,i);Ce=[],s()}}B=null}Yt.delete(this)};let Ee=ct;function Ps(){var t=vt;yn=!0;try{var e=0;for(Qn(!0);Ce.length>0;){var n=Ee.ensure();if(e++>1e3){var r,s;Bs()}n.process(Ce),je.clear()}}finally{yn=!1,Qn(t),Bn=null}}function Bs(){try{hs()}catch(t){Et(t,Bn)}}let Ue=null;function Kn(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(rt|fe))===0&&Ht(r)&&(Ue=[],It(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Pr(r):r.fn=null),Ue?.length>0)){je.clear();for(const s of Ue)It(s);Ue=[]}}Ue=null}}function mr(t){if(t.reactions!==null)for(const e of t.reactions){const n=e.f;(n&W)!==0?mr(e):(n&(un|tt))!==0&&(U(e,X),Qe(e))}}function Qe(t){for(var e=Bn=t;e.parent!==null;){e=e.parent;var n=e.f;if(yn&&e===k&&(n&tt)!==0)return;if((n&(nt|ke))!==0){if((n&L)===0)return;e.f^=L}}Ce.push(e)}function qs(t){let e=0,n=et(0),r;return()=>{Zs()&&(w(n),Ln(()=>(e===0&&(r=R(()=>t(()=>Dt(n)))),e+=1,()=>{St(()=>{e-=1,e===0&&(r?.(),r=void 0,Dt(n))})})))}}var js=ln|kt|Fn;function Ns(t,e,n){new Ls(t,e,n)}var ae,ee,Dn,pe,Ye,_e,te,H,we,Fe,We,Pe,Je,Be,rn,sn,V,Ms,Us,Kt,Xt,xn;class Ls{constructor(e,n,r){D(this,V);it(this,"parent");D(this,ae,!1);D(this,ee);D(this,Dn,null);D(this,pe);D(this,Ye);D(this,_e);D(this,te,null);D(this,H,null);D(this,we,null);D(this,Fe,null);D(this,We,0);D(this,Pe,0);D(this,Je,!1);D(this,Be,null);D(this,rn,()=>{d(this,Be)&&xt(d(this,Be),d(this,We))});D(this,sn,qs(()=>(y(this,Be,et(d(this,We))),()=>{y(this,Be,null)})));y(this,ee,e),y(this,pe,n),y(this,Ye,r),this.parent=k.b,y(this,ae,!!d(this,pe).pending),y(this,_e,Mn(()=>{k.b=this;{try{y(this,te,le(()=>r(d(this,ee))))}catch(s){this.error(s)}d(this,Pe)>0?M(this,V,Xt).call(this):y(this,ae,!1)}},js))}is_pending(){return d(this,ae)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!d(this,pe).pending}update_pending_count(e){M(this,V,xn).call(this,e),y(this,We,d(this,We)+e),mn.add(d(this,rn))}get_effect_pending(){return d(this,sn).call(this),w(d(this,Be))}error(e){var n=d(this,pe).onerror;let r=d(this,pe).failed;if(d(this,Je)||!n&&!r)throw e;d(this,te)&&(ie(d(this,te)),y(this,te,null)),d(this,H)&&(ie(d(this,H)),y(this,H,null)),d(this,we)&&(ie(d(this,we)),y(this,we,null));var s=!1,i=!1;const o=()=>{if(s){$s();return}s=!0,i&&ws(),Ee.ensure(),y(this,We,0),d(this,we)!==null&&ht(d(this,we),()=>{y(this,we,null)}),y(this,ae,this.has_pending_snippet()),y(this,te,M(this,V,Kt).call(this,()=>(y(this,Je,!1),le(()=>d(this,Ye).call(this,d(this,ee)))))),d(this,Pe)>0?M(this,V,Xt).call(this):y(this,ae,!1)};var l=E;try{Y(null),i=!0,n?.(e,o),i=!1}catch(a){Et(a,d(this,_e)&&d(this,_e).parent)}finally{Y(l)}r&&St(()=>{y(this,we,M(this,V,Kt).call(this,()=>{y(this,Je,!0);try{return le(()=>{r(d(this,ee),()=>e,()=>o)})}catch(a){return Et(a,d(this,_e).parent),null}finally{y(this,Je,!1)}}))})}}ae=new WeakMap,ee=new WeakMap,Dn=new WeakMap,pe=new WeakMap,Ye=new WeakMap,_e=new WeakMap,te=new WeakMap,H=new WeakMap,we=new WeakMap,Fe=new WeakMap,We=new WeakMap,Pe=new WeakMap,Je=new WeakMap,Be=new WeakMap,rn=new WeakMap,sn=new WeakMap,V=new WeakSet,Ms=function(){try{y(this,te,le(()=>d(this,Ye).call(this,d(this,ee))))}catch(e){this.error(e)}y(this,ae,!1)},Us=function(){const e=d(this,pe).pending;e&&(y(this,H,le(()=>e(d(this,ee)))),Ee.enqueue(()=>{y(this,te,M(this,V,Kt).call(this,()=>(Ee.ensure(),le(()=>d(this,Ye).call(this,d(this,ee)))))),d(this,Pe)>0?M(this,V,Xt).call(this):(ht(d(this,H),()=>{y(this,H,null)}),y(this,ae,!1))}))},Kt=function(e){var n=k,r=E,s=F;me(d(this,_e)),Y(d(this,_e)),yt(d(this,_e).ctx);try{return e()}catch(i){return wr(i),null}finally{me(n),Y(r),yt(s)}},Xt=function(){const e=d(this,pe).pending;d(this,te)!==null&&(y(this,Fe,document.createDocumentFragment()),zs(d(this,te),d(this,Fe))),d(this,H)===null&&y(this,H,le(()=>e(d(this,ee))))},xn=function(e){var n;if(!this.has_pending_snippet()){this.parent&&M(n=this.parent,V,xn).call(n,e);return}y(this,Pe,d(this,Pe)+e),d(this,Pe)===0&&(y(this,ae,!1),d(this,H)&&ht(d(this,H),()=>{y(this,H,null)}),d(this,Fe)&&(d(this,ee).before(d(this,Fe)),y(this,Fe,null)),St(()=>{Ee.ensure().flush()}))};function zs(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var s=n===r?null:Vt(n);e.append(n),n=s}}function Gs(t,e,n){const r=Ut()?zt:dn;if(e.length===0){n(t.map(r));return}var s=B,i=k,o=Vs();Promise.all(e.map(l=>Hs(l))).then(l=>{o();try{n([...t.map(r),...l])}catch(a){(i.f&rt)===0&&Et(a,i)}s?.deactivate(),yr()}).catch(l=>{Et(l,i)})}function Vs(){var t=k,e=E,n=F,r=B;return function(){me(t),Y(e),yt(n),r?.activate()}}function yr(){me(null),Y(null),yt(null)}function zt(t){var e=W|X,n=E!==null&&(E.f&W)!==0?E:null;return k===null||n!==null&&(n.f&se)!==0?e|=se:k.f|=kt,{ctx:F,deps:null,effects:null,equals:gr,f:e,fn:t,reactions:null,rv:0,v:N,wv:0,parent:n??k,ac:null}}function Hs(t,e){let n=k;n===null&&us();var r=n.b,s=void 0,i=et(N),o=!E,l=new Map;return ti(()=>{var a=fr();s=a.promise;try{Promise.resolve(t()).then(a.resolve,a.reject)}catch(v){a.reject(v)}var u=B,f=r.is_pending();o&&(r.update_pending_count(1),f||(u.increment(),l.get(u)?.reject(Ot),l.set(u,a)));const g=(v,h=void 0)=>{f||u.activate(),h?h!==Ot&&(i.f|=Ke,xt(i,h)):((i.f&Ke)!==0&&(i.f^=Ke),xt(i,v)),o&&(r.update_pending_count(-1),f||u.decrement()),yr()};a.promise.then(g,v=>g(null,v||"unknown"))}),Nn(()=>{for(const a of l.values())a.reject(Ot)}),new Promise(a=>{function u(f){function g(){f===s?a(i):u(s)}f.then(g,g)}u(s)})}function Ys(t){const e=zt(t);return jr(e),e}function dn(t){const e=zt(t);return e.equals=_r,e}function Sr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ie(e[n])}}function Ws(t){for(var e=t.parent;e!==null;){if((e.f&W)===0)return e;e=e.parent}return null}function qn(t){var e,n=k;me(Ws(t));try{Sr(t),e=Ur(t)}finally{me(n)}return e}function Er(t){var e=qn(t);if(t.equals(e)||(t.v=e,t.wv=Lr()),!st){var n=(qe||(t.f&se)!==0)&&t.deps!==null?Ae:L;U(t,n)}}const je=new Map;function et(t,e){var n={f:0,v:t,reactions:null,equals:gr,rv:0,wv:0};return n}function Re(t,e){const n=et(t);return jr(n),n}function Ft(t,e=!1,n=!0){var s;const r=et(t);return e||(r.equals=_r),Nt&&n&&F!==null&&F.l!==null&&((s=F.l).s??(s.s=[])).push(r),r}function re(t,e,n=!1){E!==null&&(!ce||(E.f&Jn)!==0)&&Ut()&&(E.f&(W|tt|un|Jn))!==0&&!Ie?.includes(t)&&_s();let r=n?ut(e):e;return xt(t,r)}function xt(t,e){if(!t.equals(e)){var n=t.v;st?je.set(t,e):je.set(t,n),t.v=e;var r=Ee.ensure();r.capture(t,n),(t.f&W)!==0&&((t.f&X)!==0&&qn(t),U(t,(t.f&se)===0?L:Ae)),t.wv=Lr(),xr(t,X),Ut()&&k!==null&&(k.f&L)!==0&&(k.f&(ke|nt))===0&&(Q===null?si([t]):Q.push(t))}return e}function Dt(t){re(t,t.v+1)}function xr(t,e){var n=t.reactions;if(n!==null)for(var r=Ut(),s=n.length,i=0;i<s;i++){var o=n[i],l=o.f;if(!(!r&&o===k)){var a=(l&X)===0;a&&U(o,e),(l&W)!==0?xr(o,Ae):a&&((l&tt)!==0&&Ue!==null&&Ue.push(o),Qe(o))}}}function ut(t){if(typeof t!="object"||t===null||dt in t)return t;const e=Cn(t);if(e!==ns&&e!==rs)return t;var n=new Map,r=on(t),s=Re(0),i=Xe,o=l=>{if(Xe===i)return l();var a=E,u=Xe;Y(null),tr(i);var f=l();return Y(a),tr(u),f};return r&&n.set("length",Re(t.length)),new Proxy(t,{defineProperty(l,a,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&gs();var f=n.get(a);return f===void 0?f=o(()=>{var g=Re(u.value);return n.set(a,g),g}):re(f,u.value,!0),!0},deleteProperty(l,a){var u=n.get(a);if(u===void 0){if(a in l){const f=o(()=>Re(N));n.set(a,f),Dt(s)}}else re(u,N),Dt(s);return!0},get(l,a,u){if(a===dt)return t;var f=n.get(a),g=a in l;if(f===void 0&&(!g||ft(l,a)?.writable)&&(f=o(()=>{var h=ut(g?l[a]:N),c=Re(h);return c}),n.set(a,f)),f!==void 0){var v=w(f);return v===N?void 0:v}return Reflect.get(l,a,u)},getOwnPropertyDescriptor(l,a){var u=Reflect.getOwnPropertyDescriptor(l,a);if(u&&"value"in u){var f=n.get(a);f&&(u.value=w(f))}else if(u===void 0){var g=n.get(a),v=g?.v;if(g!==void 0&&v!==N)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,a){if(a===dt)return!0;var u=n.get(a),f=u!==void 0&&u.v!==N||Reflect.has(l,a);if(u!==void 0||k!==null&&(!f||ft(l,a)?.writable)){u===void 0&&(u=o(()=>{var v=f?ut(l[a]):N,h=Re(v);return h}),n.set(a,u));var g=w(u);if(g===N)return!1}return f},set(l,a,u,f){var g=n.get(a),v=a in l;if(r&&a==="length")for(var h=u;h<g.v;h+=1){var c=n.get(h+"");c!==void 0?re(c,N):h in l&&(c=o(()=>Re(N)),n.set(h+"",c))}if(g===void 0)(!v||ft(l,a)?.writable)&&(g=o(()=>Re(void 0)),re(g,ut(u)),n.set(a,g));else{v=g.v!==N;var _=o(()=>ut(u));re(g,_)}var m=Reflect.getOwnPropertyDescriptor(l,a);if(m?.set&&m.set.call(f,u),!v){if(r&&typeof a=="string"){var I=n.get("length"),$=Number(a);Number.isInteger($)&&$>=I.v&&re(I,$+1)}Dt(s)}return!0},ownKeys(l){w(s);var a=Reflect.ownKeys(l).filter(g=>{var v=n.get(g);return v===void 0||v.v!==N});for(var[u,f]of n)f.v!==N&&!(u in l)&&a.push(u);return a},setPrototypeOf(){ps()}})}var Xn,Ir,kr,Ar;function Js(){if(Xn===void 0){Xn=window,Ir=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;kr=ft(e,"firstChild").get,Ar=ft(e,"nextSibling").get,Wn(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Wn(n)&&(n.__t=void 0)}}function Gt(t=""){return document.createTextNode(t)}function tn(t){return kr.call(t)}function Vt(t){return Ar.call(t)}function A(t,e){return tn(t)}function Tr(t,e=!1){{var n=tn(t);return n instanceof Comment&&n.data===""?Vt(n):n}}function x(t,e=1,n=!1){let r=t;for(;e--;)r=Vt(r);return r}function Ks(t){t.textContent=""}function $r(){return!1}function jn(t){var e=E,n=k;Y(null),me(null);try{return t()}finally{Y(e),me(n)}}function Or(t){k===null&&E===null&&ds(),E!==null&&(E.f&se)!==0&&k===null&&fs(),st&&cs()}function Xs(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Te(t,e,n,r=!0){var s=k;s!==null&&(s.f&fe)!==0&&(t|=fe);var i={ctx:F,deps:null,nodes_start:null,nodes_end:null,f:t|X,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{It(i),i.f|=Pn}catch(a){throw ie(i),a}else e!==null&&Qe(i);if(r){var o=i;if(n&&o.deps===null&&o.teardown===null&&o.nodes_start===null&&o.first===o.last&&(o.f&kt)===0&&(o=o.first),o!==null&&(o.parent=s,s!==null&&Xs(o,s),E!==null&&(E.f&W)!==0&&(t&nt)===0)){var l=E;(l.effects??(l.effects=[])).push(o)}}return i}function Zs(){return E!==null&&!ce}function Nn(t){const e=Te(an,null,!1);return U(e,L),e.teardown=t,e}function Zn(t){Or();var e=k.f,n=!E&&(e&ke)!==0&&(e&Pn)===0;if(n){var r=F;(r.e??(r.e=[])).push(t)}else return Dr(t)}function Dr(t){return Te(dr|hr,t,!1)}function Qs(t){return Or(),Te(an|hr,t,!0)}function ei(t){Ee.ensure();const e=Te(nt|kt,t,!0);return(n={})=>new Promise(r=>{n.outro?ht(e,()=>{ie(e),r(void 0)}):(ie(e),r(void 0))})}function In(t,e){var n=F,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=Ln(()=>{t(),!r.ran&&(r.ran=!0,R(e))})}function Rr(){var t=F;Ln(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&L)!==0&&U(n,Ae),Ht(n)&&It(n),e.ran=!1}})}function ti(t){return Te(un|kt,t,!0)}function Ln(t,e=0){return Te(an|e,t,!0)}function be(t,e=[],n=[]){Gs(e,n,r=>{Te(an,()=>t(...r.map(w)),!0)})}function Mn(t,e=0){var n=Te(tt|e,t,!0);return n}function le(t,e=!0){return Te(ke|kt,t,!0,e)}function Cr(t){var e=t.teardown;if(e!==null){const n=st,r=E;er(!0),Y(null);try{e.call(null)}finally{er(n),Y(r)}}}function Fr(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&jn(()=>{s.abort(Ot)});var r=n.next;(n.f&nt)!==0?n.parent=null:ie(n,e),n=r}}function ni(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&ke)===0&&ie(e),e=n}}function ie(t,e=!0){var n=!1;(e||(t.f&os)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ri(t.nodes_start,t.nodes_end),n=!0),Fr(t,e&&!n),nn(t,0),U(t,rt);var r=t.transitions;if(r!==null)for(const i of r)i.stop();Cr(t);var s=t.parent;s!==null&&s.first!==null&&Pr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ri(t,e){for(;t!==null;){var n=t===e?null:Vt(t);t.remove(),t=n}}function Pr(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function ht(t,e){var n=[];Un(t,n,!0),Br(n,()=>{ie(t),e&&e()})}function Br(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function Un(t,e,n){if((t.f&fe)===0){if(t.f^=fe,t.transitions!==null)for(const o of t.transitions)(o.is_global||n)&&e.push(o);for(var r=t.first;r!==null;){var s=r.next,i=(r.f&ln)!==0||(r.f&ke)!==0;Un(r,e,i?n:!1),r=s}}}function zn(t){qr(t,!0)}function qr(t,e){if((t.f&fe)!==0){t.f^=fe,(t.f&L)===0&&(U(t,X),Qe(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&ln)!==0||(n.f&ke)!==0;qr(n,s?e:!1),n=r}if(t.transitions!==null)for(const i of t.transitions)(i.is_global||e)&&i.in()}}let vt=!1;function Qn(t){vt=t}let st=!1;function er(t){st=t}let E=null,ce=!1;function Y(t){E=t}let k=null;function me(t){k=t}let Ie=null;function jr(t){E!==null&&(Ie===null?Ie=[t]:Ie.push(t))}let G=null,K=0,Q=null;function si(t){Q=t}let Nr=1,Pt=0,Xe=Pt;function tr(t){Xe=t}let qe=!1;function Lr(){return++Nr}function Ht(t){var e=t.f;if((e&X)!==0)return!0;if((e&Ae)!==0){var n=t.deps,r=(e&se)!==0;if(n!==null){var s,i,o=(e&en)!==0,l=r&&k!==null&&!qe,a=n.length;if((o||l)&&(k===null||(k.f&rt)===0)){var u=t,f=u.parent;for(s=0;s<a;s++)i=n[s],(o||!i?.reactions?.includes(u))&&(i.reactions??(i.reactions=[])).push(u);o&&(u.f^=en),l&&f!==null&&(f.f&se)===0&&(u.f^=se)}for(s=0;s<a;s++)if(i=n[s],Ht(i)&&Er(i),i.wv>t.wv)return!0}(!r||k!==null&&!qe)&&U(t,L)}return!1}function Mr(t,e,n=!0){var r=t.reactions;if(r!==null&&!Ie?.includes(t))for(var s=0;s<r.length;s++){var i=r[s];(i.f&W)!==0?Mr(i,e,!1):e===i&&(n?U(i,X):(i.f&L)!==0&&U(i,Ae),Qe(i))}}function Ur(t){var _;var e=G,n=K,r=Q,s=E,i=qe,o=Ie,l=F,a=ce,u=Xe,f=t.f;G=null,K=0,Q=null,qe=(f&se)!==0&&(ce||!vt||E===null),E=(f&(ke|nt))===0?t:null,Ie=null,yt(t.ctx),ce=!1,Xe=++Pt,t.ac!==null&&(jn(()=>{t.ac.abort(Ot)}),t.ac=null);try{t.f|=bn;var g=t.fn,v=g(),h=t.deps;if(G!==null){var c;if(nn(t,K),h!==null&&K>0)for(h.length=K+G.length,c=0;c<G.length;c++)h[K+c]=G[c];else t.deps=h=G;if(!qe||(f&W)!==0&&t.reactions!==null)for(c=K;c<h.length;c++)((_=h[c]).reactions??(_.reactions=[])).push(t)}else h!==null&&K<h.length&&(nn(t,K),h.length=K);if(Ut()&&Q!==null&&!ce&&h!==null&&(t.f&(W|Ae|X))===0)for(c=0;c<Q.length;c++)Mr(Q[c],t);return s!==null&&s!==t&&(Pt++,Q!==null&&(r===null?r=Q:r.push(...Q))),(t.f&Ke)!==0&&(t.f^=Ke),v}catch(m){return wr(m)}finally{t.f^=bn,G=e,K=n,Q=r,E=s,qe=i,Ie=o,yt(l),ce=a,Xe=u}}function ii(t,e){let n=e.reactions;if(n!==null){var r=ts.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&W)!==0&&(G===null||!G.includes(e))&&(U(e,Ae),(e.f&(se|en))===0&&(e.f^=en),Sr(e),nn(e,0))}function nn(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)ii(t,n[r])}function It(t){var e=t.f;if((e&rt)===0){U(t,L);var n=k,r=vt;k=t,vt=!0;try{(e&tt)!==0?ni(t):Fr(t),Cr(t);var s=Ur(t);t.teardown=typeof s=="function"?s:null,t.wv=Nr;var i;ur&&Ds&&(t.f&X)!==0&&t.deps}finally{vt=r,k=n}}}function w(t){var e=t.f,n=(e&W)!==0;if(E!==null&&!ce){var r=k!==null&&(k.f&rt)!==0;if(!r&&!Ie?.includes(t)){var s=E.deps;if((E.f&bn)!==0)t.rv<Pt&&(t.rv=Pt,G===null&&s!==null&&s[K]===t?K++:G===null?G=[t]:(!qe||!G.includes(t))&&G.push(t));else{(E.deps??(E.deps=[])).push(t);var i=t.reactions;i===null?t.reactions=[E]:i.includes(E)||i.push(E)}}}else if(n&&t.deps===null&&t.effects===null){var o=t,l=o.parent;l!==null&&(l.f&se)===0&&(o.f^=se)}if(st){if(je.has(t))return je.get(t);if(n){o=t;var a=o.v;return((o.f&L)===0&&o.reactions!==null||zr(o))&&(a=qn(o)),je.set(o,a),a}}else n&&(o=t,Ht(o)&&Er(o));if((t.f&Ke)!==0)throw t.v;return t.v}function zr(t){if(t.v===N)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(je.has(e)||(e.f&W)!==0&&zr(e))return!0;return!1}function R(t){var e=ce;try{return ce=!0,t()}finally{ce=e}}const oi=-7169;function U(t,e){t.f=t.f&oi|e}function gt(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(dt in t)kn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&dt in n&&kn(n)}}}function kn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{kn(t[r],e)}catch{}const n=Cn(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=cr(n);for(let s in r){const i=r[s].get;if(i)try{i.call(t)}catch{}}}}}const ai=["touchstart","touchmove"];function li(t){return ai.includes(t)}const ui=new Set,nr=new Set;function ci(t,e,n,r={}){function s(i){if(r.capture||Tt.call(e,i),!i.cancelBubble)return jn(()=>n?.call(this,i))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?St(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function Rt(t,e,n,r,s){var i={capture:r,passive:s},o=ci(t,e,n,i);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Nn(()=>{e.removeEventListener(t,o,i)})}let rr=null;function Tt(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],i=s[0]||t.target;rr=t;var o=0,l=rr===t&&t.__root;if(l){var a=s.indexOf(l);if(a!==-1&&(e===document||e===window)){t.__root=e;return}var u=s.indexOf(e);if(u===-1)return;a<=u&&(o=a)}if(i=s[o]||t.target,i!==e){Zt(t,"currentTarget",{configurable:!0,get(){return i||n}});var f=E,g=k;Y(null),me(null);try{for(var v,h=[];i!==null;){var c=i.assignedSlot||i.parentNode||i.host||null;try{var _=i["__"+r];if(_!=null&&(!i.disabled||t.target===i))if(on(_)){var[m,...I]=_;m.apply(i,[t,...I])}else _.call(i,t)}catch($){v?h.push($):v=$}if(t.cancelBubble||c===e||c===null)break;i=c}if(v){for(let $ of h)queueMicrotask(()=>{throw $});throw v}}finally{t.__root=e,delete t.currentTarget,Y(f),me(g)}}}function fi(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function An(t,e){var n=k;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function q(t,e){var n=(e&ks)!==0,r=(e&As)!==0,s,i=!t.startsWith("<!>");return()=>{s===void 0&&(s=fi(i?t:"<!>"+t),n||(s=tn(s)));var o=r||Ir?document.importNode(s,!0):s.cloneNode(!0);if(n){var l=tn(o),a=o.lastChild;An(l,a)}else An(o,o);return o}}function di(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Gt();return t.append(e,n),An(e,n),t}function P(t,e){t!==null&&t.before(e)}function ne(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function hi(t,e){return vi(t,e)}const ot=new Map;function vi(t,{target:e,anchor:n,props:r={},events:s,context:i,intro:o=!0}){Js();var l=new Set,a=g=>{for(var v=0;v<g.length;v++){var h=g[v];if(!l.has(h)){l.add(h);var c=li(h);e.addEventListener(h,Tt,{passive:c});var _=ot.get(h);_===void 0?(document.addEventListener(h,Tt,{passive:c}),ot.set(h,1)):ot.set(h,_+1)}}};a(Rn(ui)),nr.add(a);var u=void 0,f=ei(()=>{var g=n??e.appendChild(Gt());return Ns(g,{pending:()=>{}},v=>{if(i){Lt({});var h=F;h.c=i}s&&(r.$$events=s),u=t(v,r)||{},i&&Mt()}),()=>{for(var v of l){e.removeEventListener(v,Tt);var h=ot.get(v);--h===0?(document.removeEventListener(v,Tt),ot.delete(v)):ot.set(v,h)}nr.delete(a),g!==n&&g.parentNode?.removeChild(g)}});return gi.set(u,f),u}let gi=new WeakMap;function ue(t,e,n=!1){var r=t,s=null,i=null,o=N,l=n?ln:0,a=!1;const u=(h,c=!0)=>{a=!0,v(c,h)};var f=null;function g(){f!==null&&(f.lastChild.remove(),r.before(f),f=null);var h=o?s:i,c=o?i:s;h&&zn(h),c&&ht(c,()=>{o?i=null:s=null})}const v=(h,c)=>{if(o!==(o=h)){var _=$r(),m=r;if(_&&(f=document.createDocumentFragment(),f.append(m=Gt())),o?s??(s=c&&le(()=>c(m))):i??(i=c&&le(()=>c(m))),_){var I=B,$=o?s:i,p=o?i:s;$&&I.skipped_effects.delete($),p&&I.skipped_effects.add(p),I.add_callback(g)}else g()}};Mn(()=>{a=!1,e(u),a||v(null,null)},l)}function Gr(t,e){return e}function pi(t,e,n){for(var r=t.items,s=[],i=e.length,o=0;o<i;o++)Un(e[o].e,s,!0);var l=i>0&&s.length===0&&n!==null;if(l){var a=n.parentNode;Ks(a),a.append(n),r.clear(),ge(t,e[0].prev,e[i-1].next)}Br(s,()=>{for(var u=0;u<i;u++){var f=e[u];l||(r.delete(f.k),ge(t,f.prev,f.next)),ie(f.e,!l)}})}function Vr(t,e,n,r,s,i=null){var o=t,l={flags:e,items:new Map,first:null},a=(e&vr)!==0;if(a){var u=t;o=u.appendChild(Gt())}var f=null,g=!1,v=new Map,h=dn(()=>{var I=n();return on(I)?I:I==null?[]:Rn(I)}),c,_;function m(){_i(_,c,l,v,o,s,e,r,n),i!==null&&(c.length===0?f?zn(f):f=le(()=>i(o)):f!==null&&ht(f,()=>{f=null}))}Mn(()=>{_??(_=k),c=w(h);var I=c.length;if(!(g&&I===0)){g=I===0;var $,p,b,T;if($r()){var S=new Set,O=B;for(p=0;p<I;p+=1){b=c[p],T=r(b,p);var j=l.items.get(T)??v.get(T);j?(e&(cn|fn))!==0&&Hr(j,b,p,e):($=Yr(null,l,null,null,b,T,p,s,e,n,!0),v.set(T,$)),S.add(T)}for(const[ye,$e]of l.items)S.has(ye)||O.skipped_effects.add($e.e);O.add_callback(m)}else m();w(h)}})}function _i(t,e,n,r,s,i,o,l,a){var u=(o&bs)!==0,f=(o&(cn|fn))!==0,g=e.length,v=n.items,h=n.first,c=h,_,m=null,I,$=[],p=[],b,T,S,O;if(u)for(O=0;O<g;O+=1)b=e[O],T=l(b,O),S=v.get(T),S!==void 0&&(S.a?.measure(),(I??(I=new Set)).add(S));for(O=0;O<g;O+=1){if(b=e[O],T=l(b,O),S=v.get(T),S===void 0){var j=r.get(T);if(j!==void 0){r.delete(T),v.set(T,j);var ye=m?m.next:c;ge(n,m,j),ge(n,j,ye),gn(j,ye,s),m=j}else{var $e=c?c.e.nodes_start:s;m=Yr($e,n,m,m===null?n.first:m.next,b,T,O,i,o,a)}v.set(T,m),$=[],p=[],c=m.next;continue}if(f&&Hr(S,b,O,o),(S.e.f&fe)!==0&&(zn(S.e),u&&(S.a?.unfix(),(I??(I=new Set)).delete(S))),S!==c){if(_!==void 0&&_.has(S)){if($.length<p.length){var Se=p[0],J;m=Se.prev;var Le=$[0],Me=$[$.length-1];for(J=0;J<$.length;J+=1)gn($[J],Se,s);for(J=0;J<p.length;J+=1)_.delete(p[J]);ge(n,Le.prev,Me.next),ge(n,m,Le),ge(n,Me,Se),c=Se,m=Me,O-=1,$=[],p=[]}else _.delete(S),gn(S,c,s),ge(n,S.prev,S.next),ge(n,S,m===null?n.first:m.next),ge(n,m,S),m=S;continue}for($=[],p=[];c!==null&&c.k!==T;)(c.e.f&fe)===0&&(_??(_=new Set)).add(c),p.push(c),c=c.next;if(c===null)continue;S=c}$.push(S),m=S,c=S.next}if(c!==null||_!==void 0){for(var de=_===void 0?[]:Rn(_);c!==null;)(c.e.f&fe)===0&&de.push(c),c=c.next;var z=de.length;if(z>0){var he=(o&vr)!==0&&g===0?s:null;if(u){for(O=0;O<z;O+=1)de[O].a?.measure();for(O=0;O<z;O+=1)de[O].a?.fix()}pi(n,de,he)}}u&&St(()=>{if(I!==void 0)for(S of I)S.a?.apply()}),t.first=n.first&&n.first.e,t.last=m&&m.e;for(var Oe of r.values())ie(Oe.e);r.clear()}function Hr(t,e,n,r){(r&cn)!==0&&xt(t.v,e),(r&fn)!==0?xt(t.i,n):t.i=n}function Yr(t,e,n,r,s,i,o,l,a,u,f){var g=(a&cn)!==0,v=(a&ms)===0,h=g?v?Ft(s,!1,!1):et(s):s,c=(a&fn)===0?o:et(o),_={i:c,v:h,k:i,a:null,e:null,prev:n,next:r};try{if(t===null){var m=document.createDocumentFragment();m.append(t=Gt())}return _.e=le(()=>l(t,h,c,u),Os),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?f||(e.first=_):(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function gn(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,i=t.e.nodes_start;i!==null&&i!==r;){var o=Vt(i);s.before(i),i=o}}function ge(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}const sr=[...` 	
\r\f \v\uFEFF`];function wi(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var i=s.length,o=0;(o=r.indexOf(s,o))>=0;){var l=o+i;(o===0||sr.includes(r[o-1]))&&(l===r.length||sr.includes(r[l]))?r=(o===0?"":r.substring(0,o))+r.substring(l+1):o=l}}return r===""?null:r}function Ct(t,e,n,r,s,i){var o=t.__className;if(o!==n||o===void 0){var l=wi(n,r,i);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(i&&s!==i)for(var a in i){var u=!!i[a];(s==null||u!==!!s[a])&&t.classList.toggle(a,u)}return i}const bi=Symbol("is custom element"),mi=Symbol("is html");function Ze(t,e,n,r){var s=yi(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[ls]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Si(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function yi(t){return t.__attributes??(t.__attributes={[bi]:t.nodeName.includes("-"),[mi]:t.namespaceURI===Ts})}var ir=new Map;function Si(t){var e=t.getAttribute("is")||t.nodeName,n=ir.get(e);if(n)return n;ir.set(e,n=[]);for(var r,s=t,i=Element.prototype;i!==s;){r=cr(s);for(var o in r)r[o].set&&n.push(o);s=Cn(s)}return n}function Gn(t=!1){const e=F,n=e.l.u;if(!n)return;let r=()=>gt(e.s);if(t){let s=0,i={};const o=zt(()=>{let l=!1;const a=e.s;for(const u in a)a[u]!==i[u]&&(i[u]=a[u],l=!0);return l&&s++,s});r=()=>w(o)}n.b.length&&Qs(()=>{or(e,r),Qt(n.b)}),Zn(()=>{const s=R(()=>n.m.map(ss));return()=>{for(const i of s)typeof i=="function"&&i()}}),n.a.length&&Zn(()=>{or(e,r),Qt(n.a)})}function or(t,e){if(t.l.s)for(const n of t.l.s)w(n);e()}function Ei(t,e){var n=t.$$events?.[e.type],r=on(n)?n.slice():n==null?[]:[n];for(var s of r)s.call(this,e)}function Vn(t,e,n){if(t==null)return e(void 0),n&&n(void 0),xe;const r=R(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const at=[];function xi(t,e){return{subscribe:Hn(t,e).subscribe}}function Hn(t,e=xe){let n=null;const r=new Set;function s(l){if(pr(t,l)&&(t=l,n)){const a=!at.length;for(const u of r)u[1](),at.push(u,t);if(a){for(let u=0;u<at.length;u+=2)at[u][0](at[u+1]);at.length=0}}}function i(l){s(l(t))}function o(l,a=xe){const u=[l,a];return r.add(u),r.size===1&&(n=e(s,i)||xe),l(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}function pn(t,e,n){const r=!Array.isArray(t),s=r?[t]:t;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return xi(n,(o,l)=>{let a=!1;const u=[];let f=0,g=xe;const v=()=>{if(f)return;g();const c=e(r?u[0]:u,o,l);i?o(c):g=typeof c=="function"?c:xe},h=s.map((c,_)=>Vn(c,m=>{u[_]=m,f&=~(1<<_),a&&v()},()=>{f|=1<<_}));return a=!0,v(),function(){Qt(h),g(),a=!1}})}function Ii(t){let e;return Vn(t,n=>e=n)(),e}let Wt=!1,Tn=Symbol();function $n(t,e,n){const r=n[e]??(n[e]={store:null,source:Ft(void 0),unsubscribe:xe});if(r.store!==t&&!(Tn in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=xe;else{var s=!0;r.unsubscribe=Vn(t,i=>{s?r.source.v=i:re(r.source,i)}),s=!1}return t&&Tn in n?Ii(t):w(r.source)}function Wr(){const t={};function e(){Nn(()=>{for(var n in t)t[n].unsubscribe();Zt(t,Tn,{enumerable:!1,value:!0})})}return[t,e]}function ki(t){var e=Wt;try{return Wt=!1,[t(),Wt]}finally{Wt=e}}function Ne(t,e,n,r){var s=!Nt||(n&Ss)!==0,i=(n&xs)!==0,o=(n&Is)!==0,l=r,a=!0,u=()=>(a&&(a=!1,l=o?R(r):r),l),f;if(i){var g=dt in t||as in t;f=ft(t,e)?.set??(g&&e in t?p=>t[e]=p:void 0)}var v,h=!1;i?[v,h]=ki(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=u(),f&&(s&&vs(),f(v)));var c;if(s?c=()=>{var p=t[e];return p===void 0?u():(a=!0,p)}:c=()=>{var p=t[e];return p!==void 0&&(l=void 0),p===void 0?l:p},s&&(n&Es)===0)return c;if(f){var _=t.$$legacy;return(function(p,b){return arguments.length>0?((!s||!b||_||h)&&f(b?c():p),p):c()})}var m=!1,I=((n&ys)!==0?zt:dn)(()=>(m=!1,c()));i&&w(I);var $=k;return(function(p,b){if(arguments.length>0){const T=b?w(I):s&&i?ut(p):p;return re(I,T),m=!0,l!==void 0&&(l=T),p}return st&&m||($.f&rt)!==0?I.v:w(I)})}const Ai="5";var lr;typeof window<"u"&&((lr=window.__svelte??(window.__svelte={})).v??(lr.v=new Set)).add(Ai);Rs();function Ti(){const{subscribe:t,set:e}=Hn("local");return{subscribe:t,setTab:n=>e(n)}}const On=Ti();class ze extends EventTarget{constructor(){super(),this.setupDebugLogging()}static getInstance(){return ze.instance||(ze.instance=new ze),ze.instance}dispatch(e){const n=new CustomEvent("app:event",{detail:e,bubbles:!1,cancelable:!1});this.dispatchEvent(n)}on(e,n){const r=s=>{const i=s;i.detail.type===e&&n(i.detail)};return this.addEventListener("app:event",r),()=>this.removeEventListener("app:event",r)}onAll(e){const n=r=>{e(r.detail)};return this.addEventListener("app:event",n),()=>this.removeEventListener("app:event",n)}once(e,n){let r=null;const s=i=>{n(i),r&&r()};return r=this.on(e,s),r}clearAllListeners(){const e=this._listeners;e&&Object.keys(e).forEach(n=>{delete e[n]})}setupDebugLogging(){typeof window<"u"&&localStorage.getItem("debugBridge")==="true"&&this.onAll(e=>{console.log("[AppBridge]",e.type,e)})}}typeof window<"u"&&(window.enableBridgeDebug=()=>{localStorage.setItem("debugBridge","true"),console.log("AppBridge debug logging enabled. Reload the page to see events.")},window.disableBridgeDebug=()=>{localStorage.removeItem("debugBridge"),console.log("AppBridge debug logging disabled.")});var $i=q('<nav class="tabs sv-tab-nav svelte-1mmy281" aria-label="Main navigation"><button>📁 Local Files</button> <button>☁️ Google Drive</button> <button>📦 Box</button></nav>');function Oi(t,e){Lt(e,!1);const n=()=>$n(On,"$currentTab",r),[r,s]=Wr(),i=ze.getInstance();function o(c){On.setTab(c),i.dispatch({type:"tab:changed",tab:c})}Gn();var l=$i(),a=A(l);let u;var f=x(a,2);let g;var v=x(f,2);let h;be((c,_,m)=>{u=Ct(a,1,"tab-button svelte-1mmy281",null,u,c),Ze(a,"aria-current",n()==="local"?"page":void 0),g=Ct(f,1,"tab-button svelte-1mmy281",null,g,_),Ze(f,"aria-current",n()==="googleDrive"?"page":void 0),h=Ct(v,1,"tab-button svelte-1mmy281",null,h,m),Ze(v,"aria-current",n()==="box"?"page":void 0)},[()=>({active:n()==="local"}),()=>({active:n()==="googleDrive"}),()=>({active:n()==="box"})]),Rt("click",a,()=>o("local")),Rt("click",f,()=>o("googleDrive")),Rt("click",v,()=>o("box")),P(t,l),Mt(),s()}var Di=q("<span> </span>");function $t(t,e){Lt(e,!1);const n=Ft();let r=Ne(e,"status",8);const s={pass:{icon:"✓",class:"badge-success",text:"Pass"},fail:{icon:"✗",class:"badge-danger",text:"Fail"},warning:{icon:"⚠",class:"badge-warning",text:"Warning"},error:{icon:"✗",class:"badge-danger",text:"Error"}};In(()=>gt(r()),()=>{re(n,s[r()]||s.error)}),Rr();var i=Di(),o=A(i);be(()=>{Ct(i,1,`badge ${w(n),R(()=>w(n).class)??""}`,"svelte-1hqr9xd"),ne(o,`${w(n),R(()=>w(n).icon)??""} ${w(n),R(()=>w(n).text)??""}`)}),P(t,i),Mt()}var Ri=q('<div class="batch-summary svelte-1bx7qjq"><h3>Summary</h3> <p> </p></div>'),Ci=q('<th class="svelte-1bx7qjq">Sample Rate</th> <th class="svelte-1bx7qjq">Bit Depth</th> <th class="svelte-1bx7qjq">Channels</th> <th class="svelte-1bx7qjq">Duration</th>',1),Fi=q('<th class="svelte-1bx7qjq">Play</th>'),Pi=q('<td class="svelte-1bx7qjq"> </td> <td class="svelte-1bx7qjq"> </td> <td class="svelte-1bx7qjq"> </td> <td class="svelte-1bx7qjq"> </td>',1),Bi=q("<audio controls></audio>"),qi=q('<td class="svelte-1bx7qjq"><!></td>'),ji=q('<tr><td class="svelte-1bx7qjq"> </td><td class="svelte-1bx7qjq"><!></td><!><td class="svelte-1bx7qjq"> </td><!></tr>'),Ni=q('<div class="results-container svelte-1bx7qjq"><!> <table class="results-table svelte-1bx7qjq"><thead><tr><th class="svelte-1bx7qjq">Filename</th><th class="svelte-1bx7qjq">Status</th><!><th class="svelte-1bx7qjq">File Size</th><!></tr></thead><tbody></tbody></table></div>');function ar(t,e){Lt(e,!1);const n=Ft(),r=Ft();let s=Ne(e,"results",24,()=>[]),i=Ne(e,"mode",8,"single"),o=Ne(e,"metadataOnly",8,!1);function l(p,b=2){if(p===0)return"0 Bytes";const T=1024,S=b<0?0:b,O=["Bytes","KB","MB","GB","TB"],j=Math.floor(Math.log(p)/Math.log(T));return parseFloat((p/Math.pow(T,j)).toFixed(S))+" "+O[j]}In(()=>gt(i()),()=>{re(n,i()==="single")}),In(()=>(gt(i()),gt(s())),()=>{re(r,i()==="batch"?{total:s().length,passed:s().filter(p=>p.status==="pass").length,failed:s().filter(p=>p.status==="fail").length,warnings:s().filter(p=>p.status==="warning").length,errors:s().filter(p=>p.status==="error").length}:null)}),Rr(),Gn();var a=Ni(),u=A(a);{var f=p=>{var b=Ri(),T=x(A(b),2),S=A(T);be(()=>ne(S,`${w(r),R(()=>w(r).total)??""} files: ${w(r),R(()=>w(r).passed)??""} passed, ${w(r),R(()=>w(r).failed)??""} failed`)),P(p,b)};ue(u,p=>{i()==="batch"&&w(r)&&p(f)})}var g=x(u,2),v=A(g),h=A(v),c=x(A(h),2);{var _=p=>{var b=Ci();P(p,b)};ue(c,p=>{o()||p(_)})}var m=x(c,2);{var I=p=>{var b=Fi();P(p,b)};ue(m,p=>{w(n)&&p(I)})}var $=x(v);Vr($,5,s,Gr,(p,b)=>{var T=ji(),S=A(T),O=A(S),j=x(S),ye=A(j);$t(ye,{get status(){return w(b),R(()=>w(b).status)}});var $e=x(j);{var Se=z=>{var he=Pi(),Oe=Tr(he),At=A(Oe),De=x(Oe,2),C=A(De),ve=x(De,2),hn=A(ve),Xr=x(ve,2),Zr=A(Xr);be(()=>{ne(At,`${w(b),R(()=>w(b).sampleRate)??""} Hz`),ne(C,`${w(b),R(()=>w(b).bitDepth)??""} bit`),ne(hn,(w(b),R(()=>w(b).channels))),ne(Zr,`${w(b),R(()=>w(b).duration)??""}s`)}),P(z,he)};ue($e,z=>{o()||z(Se)})}var J=x($e),Le=A(J),Me=x(J);{var de=z=>{var he=qi(),Oe=A(he);{var At=De=>{var C=Bi();be(()=>Ze(C,"src",(w(b),R(()=>w(b).audioUrl)))),P(De,C)};ue(Oe,De=>{w(b),R(()=>w(b).audioUrl)&&De(At)})}P(z,he)};ue(Me,z=>{w(n)&&z(de)})}be(z=>{ne(O,(w(b),R(()=>w(b).filename))),ne(Le,z)},[()=>(w(b),R(()=>l(w(b).fileSize)))]),P(p,T)}),P(t,a),Mt()}var Li=q("<p>Processing...</p>"),Mi=q('<div class="file-upload-wrapper svelte-heqs4d"><label class="file-upload-label svelte-heqs4d">Upload a file</label> <input type="file"/> <!></div>');function Ui(t,e){let n=Ne(e,"id",8),r=Ne(e,"processing",8,!1),s=Ne(e,"accept",8,"audio/*");var i=Mi(),o=A(i),l=x(o,2),a=x(l,2);{var u=f=>{var g=Li();P(f,g)};ue(a,f=>{r()&&f(u)})}be(()=>{Ze(o,"for",n()),Ze(l,"id",n()),Ze(l,"accept",s()),l.disabled=r()}),Rt("change",l,function(f){Ei.call(this,e,f)}),P(t,i)}var zi=q("<span> </span>"),Gi=q("<div><strong> </strong> <!></div>"),Vi=q('<div class="validation-display svelte-jf5q0v"><h3>Validation Details</h3> <!></div>');function Hi(t,e){let n=Ne(e,"validation",8);var r=di(),s=Tr(r);{var i=o=>{var l=Vi(),a=x(A(l),2);Vr(a,1,()=>(gt(n()),R(()=>Object.entries(n()))),Gr,(u,f)=>{var g=Ys(()=>is(w(f),2));let v=()=>w(g)[0],h=()=>w(g)[1];var c=Gi(),_=A(c),m=A(_),I=x(_),$=x(I);{var p=b=>{var T=zi(),S=A(T);be(()=>ne(S,`(${h(),R(()=>h().issue)??""})`)),P(b,T)};ue($,b=>{h(),R(()=>h().issue)&&b(p)})}be(()=>{Ct(c,1,`validation-item ${h(),R(()=>h().status)??""}`,"svelte-jf5q0v"),ne(m,`${v()??""}:`),ne(I,` ${h(),R(()=>h().value)??""} `)}),P(u,c)}),P(o,l)};ue(s,o=>{n()&&o(i)})}P(t,r)}const Yi=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",Wi=window.location.pathname.startsWith("/beta"),Jr=Yi?"http://localhost:3000":Wi?"https://audio-analyzer.tinytech.site/beta":"https://audio-analyzer.tinytech.site",_n={CLIENT_ID:"708688597317-bmmrje6hqg8vo52nctned54m32q8uhsr.apps.googleusercontent.com",REDIRECT_URI:Jr,SCOPE:"https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",DISCOVERY_DOCS:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]},Z={CLIENT_ID:"0y78slky3xitt421wmoa0fjdz6fi14hn",REDIRECT_URI:Jr,AUTHORIZATION_URL:"https://account.box.com/api/oauth2/authorize",TOKEN_URL:"https://api.box.com/oauth2/token",API_URL:"https://api.box.com/2.0",PROXY_URL:"https://box-proxy-708688597317.us-central1.run.app"};class Ji{constructor(){this.isInitialized=!1,this.accessToken=null,this.codeClient=null,this.userInfo=null}async init(){if(!this.isInitialized)return new Promise((e,n)=>{this.loadGoogleAPI().then(()=>{this.initializeGIS().then(e).catch(n)}).catch(n)})}async loadGoogleAPI(){return new Promise((e,n)=>{if(window.gapi){e();return}const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.onload=()=>e(),r.onerror=()=>n(new Error("Failed to load Google API script")),document.head.appendChild(r)})}async initializeGIS(){return new Promise((e,n)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.onload=()=>{this.setupGIS().then(e).catch(n)},r.onerror=()=>n(new Error("Failed to load Google Identity Services")),document.head.appendChild(r)})}async setupGIS(){return new Promise((e,n)=>{const r=setTimeout(()=>{n(new Error("Google API setup timeout"))},1e4);window.gapi.load("client",async()=>{try{clearTimeout(r),await window.gapi.client.init({discoveryDocs:_n.DISCOVERY_DOCS}),this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:_n.CLIENT_ID,scope:_n.SCOPE,callback:s=>{if(s.error){console.error("Token response error:",s),n(new Error(`Google sign-in failed: ${s.error}`));return}this.accessToken=s.access_token;const i={access_token:s.access_token,expires_at:Date.now()+s.expires_in*1e3,scope:s.scope};localStorage.setItem("google_token",JSON.stringify(i)),e(i)}}),this.isInitialized=!0,e()}catch(s){clearTimeout(r),console.error("Google API setup error:",s);let i="Unknown setup error";s&&typeof s=="object"?i=s.message||s.error||s.details||JSON.stringify(s):s&&(i=s.toString()),n(new Error(`Failed to setup Google API: ${i}`))}})})}async signIn(){return this.isInitialized||await this.init(),new Promise((e,n)=>{try{this.tokenClient.callback=r=>{if(r.error){console.error("Token response error:",r),n(new Error(`Google sign-in failed: ${r.error}`));return}if(!(r.scope&&r.scope.includes("https://www.googleapis.com/auth/drive.readonly"))){console.warn("Drive scope not granted, retrying with consent prompt"),this.tokenClient.requestAccessToken({prompt:"consent"});return}this.accessToken=r.access_token;const i={access_token:r.access_token,expires_at:Date.now()+r.expires_in*1e3,scope:r.scope};localStorage.setItem("google_token",JSON.stringify(i)),e(i)},this.tokenClient.requestAccessToken({prompt:""})}catch(r){console.error("Google sign-in error:",r);let s="Unknown sign-in error";r&&typeof r=="object"?s=r.error||r.message||r.details||JSON.stringify(r):r&&(s=r.toString()),n(new Error(`Google sign-in failed: ${s}`))}})}async getValidToken(){const e=localStorage.getItem("google_token");if(e)try{const n=JSON.parse(e);if(n.expires_at>Date.now()+3e5)return this.accessToken=n.access_token,n}catch(n){console.warn("Invalid stored token:",n),localStorage.removeItem("google_token")}return await this.signIn()}async getUserInfo(){const e=await this.getValidToken();try{const n=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${e.access_token}`}});if(!n.ok)throw new Error(`Failed to get user info: ${n.status}`);const r=await n.json();return this.userInfo=r,r}catch(n){throw new Error(`Failed to get user info: ${n.message}`)}}async downloadFile(e){const n=await this.getValidToken();try{const r=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?fields=name,mimeType,size`,{headers:{Authorization:`Bearer ${n.access_token}`}});if(!r.ok)throw r.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive. Please sign in again and grant Drive access.")):new Error(`Failed to get file metadata: ${r.status}`);const s=await r.json(),i=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{headers:{Authorization:`Bearer ${n.access_token}`}});if(!i.ok)throw new Error(`Failed to download file: ${i.status}`);const o=await i.blob();return new File([o],s.name,{type:s.mimeType||"audio/mpeg"})}catch(r){throw new Error(`Google Drive download failed: ${r.message}`)}}async listAudioFilesInFolder(e){const n=await this.getValidToken();try{const s=["audio/mpeg","audio/wav","audio/x-wav","audio/wave","audio/flac","audio/x-flac","audio/aac","audio/mp4","audio/ogg","audio/x-m4a"].map(a=>`mimeType='${a}'`).join(" or "),i=`'${e}' in parents and (${s}) and trashed=false`,o=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(i)}&fields=files(id,name,mimeType,size,modifiedTime,videoMediaMetadata)&pageSize=1000`,{headers:{Authorization:`Bearer ${n.access_token}`}});if(!o.ok)throw o.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive folder. Please sign in again.")):new Error(`Failed to list folder contents: ${o.status}`);return(await o.json()).files||[]}catch(r){throw new Error(`Failed to list folder: ${r.message}`)}}async listFilesInFolder(e,n){const r=await this.getValidToken();try{const s=`'${e}' in parents and trashed=false`,i=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(s)}&fields=files(id,name,mimeType)&pageSize=1000`,{headers:{Authorization:`Bearer ${r.access_token}`}});if(!i.ok)throw i.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive folder. Please sign in again.")):new Error(`Failed to list folder contents: ${i.status}`);const l=(await i.json()).files||[];return n?l.filter(a=>a.name.toLowerCase().endsWith(n.toLowerCase())):l}catch(s){throw new Error(`Failed to list folder: ${s.message}`)}}async downloadFileHeaders(e,n=102400){const r=await this.getValidToken();try{const s=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{headers:{Authorization:`Bearer ${r.access_token}`,Range:`bytes=0-${n-1}`}});if(!s.ok&&s.status!==206)throw new Error(`Failed to download file headers: ${s.status}`);return await s.blob()}catch(s){throw new Error(`Failed to download headers: ${s.message}`)}}async getFileMetadata(e){if(e.videoMediaMetadata)return e;const n=await this.getValidToken();try{const r=await fetch(`https://www.googleapis.com/drive/v3/files/${e.id}?fields=name,mimeType,size,modifiedTime,videoMediaMetadata`,{headers:{Authorization:`Bearer ${n.access_token}`}});if(!r.ok)throw r.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive. Please sign in again and grant Drive access.")):new Error(`Failed to get file metadata: ${r.status}`);return await r.json()}catch(r){throw new Error(`Google Drive metadata fetch failed: ${r.message}`)}}signOut(){this.accessToken&&window.google&&window.google.accounts.oauth2.revoke(this.accessToken),this.accessToken=null,localStorage.removeItem("google_token")}isSignedIn(){const e=localStorage.getItem("google_token");if(!e)return!1;try{return JSON.parse(e).expires_at>Date.now()}catch{return!1}}}class Ki{constructor(){this.isInitialized=!1,this.accessToken=null,this.userInfo=null}async init(){this.isInitialized||(console.log("[Box Auth] Init started at:",new Date().toISOString()),await this.handleOAuthCallback(),console.log("[Box Auth] Init completed at:",new Date().toISOString()),this.isInitialized=!0)}async handleOAuthCallback(){const e=new URLSearchParams(window.location.search);if(e.has("code")){console.log("[Box OAuth] Callback received at:",new Date().toISOString());const n=e.get("code"),r=e.get("state"),s=localStorage.getItem("box_oauth_state");if(!s||s!==r)return console.error("OAuth state mismatch"),!1;console.log("[Box OAuth] State verified, exchanging code at:",new Date().toISOString());try{const i=await fetch(`${Z.PROXY_URL}?action=token&code=${encodeURIComponent(n)}`);if(console.log("[Box OAuth] Token exchange response at:",new Date().toISOString(),"Status:",i.status),!i.ok){const a=await i.text();throw console.error("[Box OAuth] Token exchange failed:",a),new Error(`Token exchange failed: ${i.status}`)}const o=await i.json(),l={access_token:o.access_token,refresh_token:o.refresh_token,expires_at:Date.now()+o.expires_in*1e3};return localStorage.setItem("box_token",JSON.stringify(l)),this.accessToken=o.access_token,localStorage.setItem("box_just_authenticated","true"),window.history.replaceState({},document.title,window.location.pathname),!0}catch(i){return console.error("Failed to exchange authorization code:",i),!1}}return!1}async signIn(){this.isInitialized||await this.init();const e=Math.random().toString(36).substring(2,15);localStorage.setItem("box_oauth_state",e);const n=new URL(Z.AUTHORIZATION_URL);n.searchParams.append("client_id",Z.CLIENT_ID),n.searchParams.append("response_type","code"),n.searchParams.append("redirect_uri",Z.REDIRECT_URI),n.searchParams.append("state",e),window.location.href=n.toString()}async getValidToken(){const e=localStorage.getItem("box_token");if(e)try{const n=JSON.parse(e);if(n.expires_at>Date.now()+3e5)return this.accessToken=n.access_token,n}catch(n){console.warn("Invalid stored token:",n),localStorage.removeItem("box_token")}throw new Error("Not signed in to Box")}async getUserInfo(){const e=await this.getValidToken();try{const n=await fetch(`${Z.API_URL}/users/me`,{headers:{Authorization:`Bearer ${e.access_token}`}});if(!n.ok)throw new Error(`Failed to get user info: ${n.status}`);const r=await n.json();return this.userInfo=r,r}catch(n){throw new Error(`Failed to get user info: ${n.message}`)}}async downloadFile(e,n=null){try{const r=await this.getValidToken();console.log("[Box Download] Token retrieved:",r?"Yes":"No","Expires at:",new Date(r.expires_at).toISOString());const s={Authorization:`Bearer ${r.access_token}`};console.log("[Box Download] Fetching metadata for file:",e);const i=await fetch(`${Z.API_URL}/files/${e}`,{headers:s});if(!i.ok){const u=await i.text();throw console.error("[Box Download] Metadata fetch failed:",i.status,u),i.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to get file metadata: ${i.status}`)}const o=await i.json();console.log("[Box Download] Metadata retrieved:",o.name),console.log("[Box Download] Downloading file content...");const l=await fetch(`${Z.API_URL}/files/${e}/content`,{headers:s});if(!l.ok){const u=await l.text();throw console.error("[Box Download] File download failed:",l.status,u),new Error(`Failed to download file: ${l.status}`)}const a=await l.blob();return new File([a],o.name,{type:o.content_type||"audio/mpeg"})}catch(r){throw new Error(`Box download failed: ${r.message}`)}}async listAudioFilesInFolder(e,n=null){try{const r=`${Z.API_URL}/folders/${e}/items?fields=id,name,type,size,modified_at&limit=1000`;let s=`${Z.PROXY_URL}?url=${encodeURIComponent(r)}`;if(n)s+=`&boxapi=${encodeURIComponent(n)}`;else{const f=await this.getValidToken();s+=`&token=${encodeURIComponent(f.access_token)}`}const i=await fetch(s);if(!i.ok)throw!n&&i.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to list folder contents: ${i.status}`);const l=(await i.json()).entries||[],a=[".mp3",".wav",".flac",".aac",".m4a",".ogg"];return l.filter(f=>{if(f.type!=="file")return!1;const g=f.name.toLowerCase();return a.some(v=>g.endsWith(v))})}catch(r){throw new Error(`Failed to list folder: ${r.message}`)}}async listFilesInFolder(e,n,r=null){try{const s={};if(r)s.BoxApi=`shared_link=${r}`;else{const u=await this.getValidToken();s.Authorization=`Bearer ${u.access_token}`}const i=await fetch(`${Z.API_URL}/folders/${e}/items?fields=id,name,type&limit=1000`,{headers:s});if(!i.ok)throw!r&&i.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to list folder contents: ${i.status}`);let a=((await i.json()).entries||[]).filter(u=>u.type==="file");return n&&(a=a.filter(u=>u.name.toLowerCase().endsWith(n.toLowerCase()))),a}catch(s){throw new Error(`Failed to list folder: ${s.message}`)}}async downloadFileHeaders(e,n=102400,r=null){try{const s={Range:`bytes=0-${n-1}`};if(r)s.BoxApi=`shared_link=${r}`;else{const o=await this.getValidToken();s.Authorization=`Bearer ${o.access_token}`}const i=await fetch(`${Z.API_URL}/files/${e}/content`,{headers:s});if(!i.ok&&i.status!==206)throw new Error(`Failed to download file headers: ${i.status}`);return await i.blob()}catch(s){throw new Error(`Failed to download headers: ${s.message}`)}}async getFileMetadata(e,n=null){try{const r={};if(n)r.BoxApi=`shared_link=${n}`;else{const i=await this.getValidToken();r.Authorization=`Bearer ${i.access_token}`}const s=await fetch(`${Z.API_URL}/files/${e.id}?fields=id,name,size,modified_at,content_type`,{headers:r});if(!s.ok)throw!n&&s.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to get file metadata: ${s.status}`);return await s.json()}catch(r){throw new Error(`Box metadata fetch failed: ${r.message}`)}}signOut(){this.accessToken=null,this.userInfo=null,localStorage.removeItem("box_token"),localStorage.removeItem("box_oauth_state")}isSignedIn(){const e=localStorage.getItem("box_token");if(!e)return!1;try{return JSON.parse(e).expires_at>Date.now()}catch{return!1}}}class Ge{constructor(){this.authStateStore=Hn({google:{isAuthenticated:!1,isInitialized:!1,userInfo:null,error:null},box:{isAuthenticated:!1,isInitialized:!1,error:null}}),this.googleAuth=new Ji,this.boxAuth=new Ki,this.authState={subscribe:e=>this.authStateStore.subscribe(e)},this.isGoogleAuthenticated=pn(this.authStateStore,e=>e.google.isAuthenticated),this.isBoxAuthenticated=pn(this.authStateStore,e=>e.box.isAuthenticated),this.googleUserInfo=pn(this.authStateStore,e=>e.google.userInfo),this.initialize()}static getInstance(){return Ge.instance||(Ge.instance=new Ge),Ge.instance}async initialize(){try{if(await this.googleAuth.init(),this.updateGoogleState({isInitialized:!0}),this.googleAuth.isSignedIn()){const e=await this.googleAuth.getUserInfo();this.updateGoogleState({isAuthenticated:!0,userInfo:e})}}catch(e){console.error("Failed to initialize Google auth:",e),this.updateGoogleState({error:e instanceof Error?e:new Error(String(e))})}try{await this.boxAuth.init(),this.updateBoxState({isInitialized:!0}),this.boxAuth.isSignedIn()&&this.updateBoxState({isAuthenticated:!0})}catch(e){console.error("Failed to initialize Box auth:",e),this.updateBoxState({error:e instanceof Error?e:new Error(String(e))})}}async signInGoogle(){try{await this.googleAuth.signIn();const e=await this.googleAuth.getUserInfo();this.updateGoogleState({isAuthenticated:!0,userInfo:e,error:null})}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.updateGoogleState({error:n}),n}}async signOutGoogle(){try{await this.googleAuth.signOut(),this.updateGoogleState({isAuthenticated:!1,userInfo:null,error:null})}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.updateGoogleState({error:n}),n}}async signInBox(){try{await this.boxAuth.signIn(),this.updateBoxState({isAuthenticated:!0,error:null})}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.updateBoxState({error:n}),n}}async signOutBox(){try{await this.boxAuth.signOut(),this.updateBoxState({isAuthenticated:!1,error:null})}catch(e){const n=e instanceof Error?e:new Error(String(e));throw this.updateBoxState({error:n}),n}}getGoogleAuthInstance(){return this.googleAuth}getBoxAuthInstance(){return this.boxAuth}isGoogleAuthenticatedSync(){return this.googleAuth.isSignedIn()}isBoxAuthenticatedSync(){return this.boxAuth.isSignedIn()}updateGoogleState(e){this.authStateStore.update(n=>({...n,google:{...n.google,...e}}))}updateBoxState(e){this.authStateStore.update(n=>({...n,box:{...n.box,...e}}))}resetState(){this.authStateStore.set({google:{isAuthenticated:!1,isInitialized:!1,userInfo:null,error:null},box:{isAuthenticated:!1,isInitialized:!1,error:null}})}}let wn=null;function Kr(){return wn||(wn=Ge.getInstance()),wn}Kr();const Xi={subscribe:t=>Kr().authState.subscribe(t)};var Zi=q('<p style="margin-top: 2rem; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;"> </p>'),Qi=q('<p style="margin-top: 2rem; padding: 1rem; background: var(--bg-secondary); border-radius: 8px;">✅ Signed in to Box</p>'),eo=q(`<div class="app sv-app svelte-nejbyb"><header class="header svelte-nejbyb"><div class="header-content svelte-nejbyb"><div class="header-spacer svelte-nejbyb"></div> <h1 class="logo svelte-nejbyb">🎵 Audio Analyzer</h1> <button class="dark-mode-toggle svelte-nejbyb" aria-label="Toggle dark mode"><span class="light-icon svelte-nejbyb">🌙</span> <span class="dark-icon svelte-nejbyb">☀️</span></button></div></header> <main class="main svelte-nejbyb"><div class="container svelte-nejbyb"><!> <div class="component-demo svelte-nejbyb"><h2 class="svelte-nejbyb">Phase 5.3: Shared Components Demo</h2> <p class="demo-note svelte-nejbyb">This demo verifies all Phase 5.3 shared components are working correctly.
          Tab content will use these components in Phase 5.4+.</p> <section class="demo-section svelte-nejbyb"><h3 class="svelte-nejbyb">StatusBadge Component</h3> <div class="badge-demo svelte-nejbyb"><!> <!> <!> <!></div></section> <section class="demo-section svelte-nejbyb"><h3 class="svelte-nejbyb">FileUpload Component</h3> <!></section> <section class="demo-section svelte-nejbyb"><h3 class="svelte-nejbyb">ResultsTable Component - Single File Mode</h3> <!></section> <section class="demo-section svelte-nejbyb"><h3 class="svelte-nejbyb">ResultsTable Component - Batch Mode</h3> <!></section> <section class="demo-section svelte-nejbyb"><h3 class="svelte-nejbyb">ValidationDisplay Component</h3> <!></section> <!> <!></div></div></main> <footer class="footer svelte-nejbyb"><div class="container svelte-nejbyb"><p id="buildInfo" class="svelte-nejbyb">Audio Analyzer - Phase 5.2b App Shell</p></div></footer></div>`);function to(t,e){Lt(e,!1);const n=()=>$n(On,"$currentTab",s),r=()=>$n(Xi,"$authState",s),[s,i]=Wr();function o(){const C=document.documentElement,ve=C.getAttribute("data-theme")==="dark";C.setAttribute("data-theme",ve?"light":"dark"),localStorage.setItem("theme",ve?"light":"dark")}if(typeof window<"u"){const C=localStorage.getItem("theme");C&&document.documentElement.setAttribute("data-theme",C)}const l=[{filename:"demo-pass.wav",status:"pass",sampleRate:48e3,bitDepth:24,channels:2,duration:120.5,fileSize:14155776},{filename:"demo-warning.wav",status:"warning",sampleRate:44100,bitDepth:16,channels:2,duration:60,fileSize:5292e3},{filename:"demo-fail.wav",status:"fail",sampleRate:22050,bitDepth:8,channels:1,duration:30,fileSize:661500}],a={sampleRate:{status:"pass",value:"48000 Hz"},bitDepth:{status:"pass",value:"24 bit"},channels:{status:"warning",value:"2 (stereo)",issue:"Expected mono for this preset"},duration:{status:"fail",value:"30s",issue:"Minimum duration is 60s"}};let u=!1;function f(C){console.log("File change event:",C)}Gn();var g=eo(),v=A(g),h=A(v),c=x(A(h),4),_=x(v,2),m=A(_),I=A(m);Oi(I,{});var $=x(I,2),p=x(A($),4),b=x(A(p),2),T=A(b);$t(T,{status:"pass"});var S=x(T,2);$t(S,{status:"warning"});var O=x(S,2);$t(O,{status:"fail"});var j=x(O,2);$t(j,{status:"error"});var ye=x(p,2),$e=x(A(ye),2);Ui($e,{id:"demo-upload",processing:u,$$events:{change:f}});var Se=x(ye,2),J=x(A(Se),2);{let C=dn(()=>[l[0]]);ar(J,{get results(){return w(C)},mode:"single"})}var Le=x(Se,2),Me=x(A(Le),2);ar(Me,{get results(){return l},mode:"batch"});var de=x(Le,2),z=x(A(de),2);Hi(z,{get validation(){return a}});var he=x(de,2);{var Oe=C=>{var ve=Zi(),hn=A(ve);be(()=>ne(hn,`✅ Signed in as ${r().google.userInfo?.email??""}`)),P(C,ve)};ue(he,C=>{n()==="googleDrive"&&r().google.isAuthenticated&&C(Oe)})}var At=x(he,2);{var De=C=>{var ve=Qi();P(C,ve)};ue(At,C=>{n()==="box"&&r().box.isAuthenticated&&C(De)})}Rt("click",c,o),P(t,g),Mt(),i()}class no{constructor(){this.unsubscribers=[],this.bridge=ze.getInstance(),this.authService=Ge.getInstance(),this.attachEventListeners()}attachEventListeners(){this.unsubscribers.push(this.bridge.on("auth:google:signin:requested",()=>this.handleGoogleSignIn())),this.unsubscribers.push(this.bridge.on("auth:google:signout:requested",()=>this.handleGoogleSignOut())),this.unsubscribers.push(this.bridge.on("auth:box:signin:requested",()=>this.handleBoxSignIn())),this.unsubscribers.push(this.bridge.on("auth:box:signout:requested",()=>this.handleBoxSignOut())),this.unsubscribers.push(this.bridge.on("file:local:selected",e=>{console.log("[ServiceCoordinator] File selected:",e.file.name)})),this.unsubscribers.push(this.bridge.on("file:drive:requested",e=>{console.log("[ServiceCoordinator] Google Drive file requested:",e.url)})),this.unsubscribers.push(this.bridge.on("file:box:requested",e=>{console.log("[ServiceCoordinator] Box file requested:",e.url)}))}async handleGoogleSignIn(){try{await this.authService.signInGoogle();const n=await this.authService.getGoogleAuthInstance().getUserInfo();this.bridge.dispatch({type:"auth:google:signin:success",userInfo:n})}catch(e){this.bridge.dispatch({type:"auth:google:signin:error",error:e instanceof Error?e:new Error(String(e))})}}async handleGoogleSignOut(){try{await this.authService.signOutGoogle(),this.bridge.dispatch({type:"auth:google:signout:success"})}catch(e){this.bridge.dispatch({type:"auth:google:signout:error",error:e instanceof Error?e:new Error(String(e))})}}async handleBoxSignIn(){try{await this.authService.signInBox(),this.bridge.dispatch({type:"auth:box:signin:success"})}catch(e){this.bridge.dispatch({type:"auth:box:signin:error",error:e instanceof Error?e:new Error(String(e))})}}async handleBoxSignOut(){try{await this.authService.signOutBox(),this.bridge.dispatch({type:"auth:box:signout:success"})}catch(e){this.bridge.dispatch({type:"auth:box:signout:error",error:e instanceof Error?e:new Error(String(e))})}}destroy(){this.unsubscribers.forEach(e=>e()),this.unsubscribers=[]}}new no;hi(to,{target:document.getElementById("app")});
