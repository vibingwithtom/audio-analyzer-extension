var ei=Object.defineProperty;var Yn=n=>{throw TypeError(n)};var ti=(n,e,t)=>e in n?ei(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var lt=(n,e,t)=>ti(n,typeof e!="symbol"?e+"":e,t),mn=(n,e,t)=>e.has(n)||Yn("Cannot "+t);var b=(n,e,t)=>(mn(n,e,"read from private field"),t?t.call(n):e.get(n)),P=(n,e,t)=>e.has(n)?Yn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),T=(n,e,t,r)=>(mn(n,e,"write to private field"),r?r.call(n,t):e.set(n,t),t),K=(n,e,t)=>(mn(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();const ur=!1;var sn=Array.isArray,ni=Array.prototype.indexOf,Fn=Array.from,Zt=Object.defineProperty,vt=Object.getOwnPropertyDescriptor,fr=Object.getOwnPropertyDescriptors,ri=Object.prototype,ii=Array.prototype,Mn=Object.getPrototypeOf,Jn=Object.isExtensible;const Te=()=>{};function oi(n){return n()}function Qt(n){for(var e=0;e<n.length;e++)n[e]()}function dr(){var n,e,t=new Promise((r,i)=>{n=r,e=i});return{promise:t,resolve:n,reject:e}}function si(n,e){if(Array.isArray(n))return n;if(!(Symbol.iterator in n))return Array.from(n);const t=[];for(const r of n)if(t.push(r),t.length===e)break;return t}const ne=2,hr=4,an=8,et=16,Ce=32,tt=64,Pn=128,fe=256,en=512,J=1024,oe=2048,Re=4096,me=8192,nt=16384,qn=32768,ln=65536,Kn=1<<17,ai=1<<18,Dt=1<<19,vr=1<<20,kn=1<<21,cn=1<<22,Je=1<<23,gt=Symbol("$state"),li=Symbol("legacy props"),ci=Symbol(""),Ct=new class extends Error{constructor(){super(...arguments);lt(this,"name","StaleReactionError");lt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ui(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function fi(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function di(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function hi(n){throw new Error("https://svelte.dev/e/effect_orphan")}function vi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function gi(n){throw new Error("https://svelte.dev/e/props_invalid_value")}function pi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _i(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function wi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const un=1,fn=2,gr=4,bi=8,yi=16,Si=1,ki=2,Ei=4,xi=8,Ii=16,Ai=1,Ti=2,Y=Symbol(),Di="http://www.w3.org/1999/xhtml";function Bi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Ci=!1;function pr(n){return n===this.v}function _r(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function mr(n){return!_r(n,this.v)}let qt=!1,Ri=!1;function $i(){qt=!0}let V=null;function Et(n){V=n}function rt(n,e=!1,t){V={p:V,c:null,e:null,s:n,x:null,l:qt&&!e?{s:null,u:null,$:[]}:null}}function it(n){var e=V,t=e.e;if(t!==null){e.e=null;for(var r of t)Cr(r)}return V=e.p,{}}function zt(){return!qt||V!==null&&V.l===null}let ft=[];function Oi(){var n=ft;ft=[],Qt(n)}function xt(n){if(ft.length===0){var e=ft;queueMicrotask(()=>{e===ft&&Oi()})}ft.push(n)}const Fi=new WeakMap;function wr(n){var e=C;if(e===null)return D.f|=Je,n;if((e.f&qn)===0){if((e.f&Pn)===0)throw!e.parent&&n instanceof Error&&br(n),n;e.b.error(n)}else It(n,e)}function It(n,e){for(;e!==null;){if((e.f&Pn)!==0)try{e.b.error(n);return}catch(t){n=t}e=e.parent}throw n instanceof Error&&br(n),n}function br(n){const e=Fi.get(n);e&&(Zt(n,"message",{value:e.message}),Zt(n,"stack",{value:e.stack}))}const Wt=new Set;let H=null,En=new Set,Fe=[],zn=null,xn=!1;var wt,bt,Ge,Ft,yt,St,Ve,kt,Mt,Pt,he,In,Yt,An;const ht=class ht{constructor(){P(this,he);lt(this,"current",new Map);P(this,wt,new Map);P(this,bt,new Set);P(this,Ge,0);P(this,Ft,null);P(this,yt,[]);P(this,St,[]);P(this,Ve,[]);P(this,kt,[]);P(this,Mt,[]);P(this,Pt,[]);lt(this,"skipped_effects",new Set)}process(e){Fe=[];var t=ht.apply(this);for(const o of e)K(this,he,In).call(this,o);if(b(this,Ge)===0){K(this,he,An).call(this);var r=b(this,St),i=b(this,Ve);T(this,St,[]),T(this,Ve,[]),T(this,kt,[]),H=null,Xn(r),Xn(i),b(this,Ft)?.resolve()}else K(this,he,Yt).call(this,b(this,St)),K(this,he,Yt).call(this,b(this,Ve)),K(this,he,Yt).call(this,b(this,kt));t();for(const o of b(this,yt))Tt(o);T(this,yt,[])}capture(e,t){b(this,wt).has(e)||b(this,wt).set(e,t),this.current.set(e,e.v)}activate(){H=this}deactivate(){H=null}flush(){if(Fe.length>0){if(this.activate(),Mi(),H!==null&&H!==this)return}else b(this,Ge)===0&&K(this,he,An).call(this);this.deactivate();for(const e of En)if(En.delete(e),e(),H!==null)break}increment(){T(this,Ge,b(this,Ge)+1)}decrement(){T(this,Ge,b(this,Ge)-1);for(const e of b(this,Mt))X(e,oe),Ze(e);for(const e of b(this,Pt))X(e,Re),Ze(e);this.flush()}add_callback(e){b(this,bt).add(e)}settled(){return(b(this,Ft)??T(this,Ft,dr())).promise}static ensure(){if(H===null){const e=H=new ht;Wt.add(H),ht.enqueue(()=>{H===e&&e.flush()})}return H}static enqueue(e){xt(e)}static apply(e){return Te}};wt=new WeakMap,bt=new WeakMap,Ge=new WeakMap,Ft=new WeakMap,yt=new WeakMap,St=new WeakMap,Ve=new WeakMap,kt=new WeakMap,Mt=new WeakMap,Pt=new WeakMap,he=new WeakSet,In=function(e){e.f^=J;for(var t=e.first;t!==null;){var r=t.f,i=(r&(Ce|tt))!==0,o=i&&(r&J)!==0,s=o||(r&me)!==0||this.skipped_effects.has(t);if(!s&&t.fn!==null){i?t.f^=J:(r&hr)!==0?b(this,Ve).push(t):(r&J)===0&&((r&cn)!==0&&t.b?.is_pending()?b(this,yt).push(t):Nt(t)&&((t.f&et)!==0&&b(this,kt).push(t),Tt(t)));var l=t.first;if(l!==null){t=l;continue}}var a=t.parent;for(t=t.next;t===null&&a!==null;)t=a.next,a=a.parent}},Yt=function(e){for(const t of e)((t.f&oe)!==0?b(this,Mt):b(this,Pt)).push(t),X(t,J);e.length=0},An=function(){var e;for(const t of b(this,bt))t();if(b(this,bt).clear(),Wt.size>1){b(this,wt).clear();let t=!0;for(const r of Wt){if(r===this){t=!1;continue}for(const[i,o]of this.current){if(r.current.has(i))if(t)r.current.set(i,o);else continue;yr(i)}if(Fe.length>0){H=r;const i=ht.apply(r);for(const o of Fe)K(e=r,he,In).call(e,o);Fe=[],i()}}H=null}Wt.delete(this)};let Ie=ht;function Mi(){var n=_t;xn=!0;try{var e=0;for(tr(!0);Fe.length>0;){var t=Ie.ensure();if(e++>1e3){var r,i;Pi()}t.process(Fe),Ue.clear()}}finally{xn=!1,tr(n),zn=null}}function Pi(){try{vi()}catch(n){It(n,zn)}}let je=null;function Xn(n){var e=n.length;if(e!==0){for(var t=0;t<e;){var r=n[t++];if((r.f&(nt|me))===0&&Nt(r)&&(je=[],Tt(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Fr(r):r.fn=null),je?.length>0)){Ue.clear();for(const i of je)Tt(i);je=[]}}je=null}}function yr(n){if(n.reactions!==null)for(const e of n.reactions){const t=e.f;(t&ne)!==0?yr(e):(t&(cn|et))!==0&&(X(e,oe),Ze(e))}}function Ze(n){for(var e=zn=n;e.parent!==null;){e=e.parent;var t=e.f;if(xn&&e===C&&(t&et)!==0)return;if((t&(tt|Ce))!==0){if((t&J)===0)return;e.f^=J}}Fe.push(e)}function qi(n){let e=0,t=Qe(0),r;return()=>{to()&&(E(t),vn(()=>(e===0&&(r=z(()=>n(()=>Rt(t)))),e+=1,()=>{xt(()=>{e-=1,e===0&&(r?.(),r=void 0,Rt(t))})})))}}var zi=ln|Dt|Pn;function Ui(n,e,t){new Li(n,e,t)}var ve,ce,On,be,We,ye,ue,ee,Se,Me,He,Pe,Ye,qe,rn,on,Q,ji,Ni,Jt,Kt,Tn;class Li{constructor(e,t,r){P(this,Q);lt(this,"parent");P(this,ve,!1);P(this,ce);P(this,On,null);P(this,be);P(this,We);P(this,ye);P(this,ue,null);P(this,ee,null);P(this,Se,null);P(this,Me,null);P(this,He,0);P(this,Pe,0);P(this,Ye,!1);P(this,qe,null);P(this,rn,()=>{b(this,qe)&&At(b(this,qe),b(this,He))});P(this,on,qi(()=>(T(this,qe,Qe(b(this,He))),()=>{T(this,qe,null)})));T(this,ce,e),T(this,be,t),T(this,We,r),this.parent=C.b,T(this,ve,!!b(this,be).pending),T(this,ye,jn(()=>{C.b=this;{try{T(this,ue,ge(()=>r(b(this,ce))))}catch(i){this.error(i)}b(this,Pe)>0?K(this,Q,Kt).call(this):T(this,ve,!1)}},zi))}is_pending(){return b(this,ve)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!b(this,be).pending}update_pending_count(e){K(this,Q,Tn).call(this,e),T(this,He,b(this,He)+e),En.add(b(this,rn))}get_effect_pending(){return b(this,on).call(this),E(b(this,qe))}error(e){var t=b(this,be).onerror;let r=b(this,be).failed;if(b(this,Ye)||!t&&!r)throw e;b(this,ue)&&(de(b(this,ue)),T(this,ue,null)),b(this,ee)&&(de(b(this,ee)),T(this,ee,null)),b(this,Se)&&(de(b(this,Se)),T(this,Se,null));var i=!1,o=!1;const s=()=>{if(i){Bi();return}i=!0,o&&wi(),Ie.ensure(),T(this,He,0),b(this,Se)!==null&&pt(b(this,Se),()=>{T(this,Se,null)}),T(this,ve,this.has_pending_snippet()),T(this,ue,K(this,Q,Jt).call(this,()=>(T(this,Ye,!1),ge(()=>b(this,We).call(this,b(this,ce)))))),b(this,Pe)>0?K(this,Q,Kt).call(this):T(this,ve,!1)};var l=D;try{te(null),o=!0,t?.(e,s),o=!1}catch(a){It(a,b(this,ye)&&b(this,ye).parent)}finally{te(l)}r&&xt(()=>{T(this,Se,K(this,Q,Jt).call(this,()=>{T(this,Ye,!0);try{return ge(()=>{r(b(this,ce),()=>e,()=>s)})}catch(a){return It(a,b(this,ye).parent),null}finally{T(this,Ye,!1)}}))})}}ve=new WeakMap,ce=new WeakMap,On=new WeakMap,be=new WeakMap,We=new WeakMap,ye=new WeakMap,ue=new WeakMap,ee=new WeakMap,Se=new WeakMap,Me=new WeakMap,He=new WeakMap,Pe=new WeakMap,Ye=new WeakMap,qe=new WeakMap,rn=new WeakMap,on=new WeakMap,Q=new WeakSet,ji=function(){try{T(this,ue,ge(()=>b(this,We).call(this,b(this,ce))))}catch(e){this.error(e)}T(this,ve,!1)},Ni=function(){const e=b(this,be).pending;e&&(T(this,ee,ge(()=>e(b(this,ce)))),Ie.enqueue(()=>{T(this,ue,K(this,Q,Jt).call(this,()=>(Ie.ensure(),ge(()=>b(this,We).call(this,b(this,ce)))))),b(this,Pe)>0?K(this,Q,Kt).call(this):(pt(b(this,ee),()=>{T(this,ee,null)}),T(this,ve,!1))}))},Jt=function(e){var t=C,r=D,i=V;xe(b(this,ye)),te(b(this,ye)),Et(b(this,ye).ctx);try{return e()}catch(o){return wr(o),null}finally{xe(t),te(r),Et(i)}},Kt=function(){const e=b(this,be).pending;b(this,ue)!==null&&(T(this,Me,document.createDocumentFragment()),Gi(b(this,ue),b(this,Me))),b(this,ee)===null&&T(this,ee,ge(()=>e(b(this,ce))))},Tn=function(e){var t;if(!this.has_pending_snippet()){this.parent&&K(t=this.parent,Q,Tn).call(t,e);return}T(this,Pe,b(this,Pe)+e),b(this,Pe)===0&&(T(this,ve,!1),b(this,ee)&&pt(b(this,ee),()=>{T(this,ee,null)}),b(this,Me)&&(b(this,ce).before(b(this,Me)),T(this,Me,null)),xt(()=>{Ie.ensure().flush()}))};function Gi(n,e){for(var t=n.nodes_start,r=n.nodes_end;t!==null;){var i=t===r?null:jt(t);e.append(t),t=i}}function Vi(n,e,t){const r=zt()?Ut:dn;if(e.length===0){t(n.map(r));return}var i=H,o=C,s=Wi();Promise.all(e.map(l=>Hi(l))).then(l=>{s();try{t([...n.map(r),...l])}catch(a){(o.f&nt)===0&&It(a,o)}i?.deactivate(),Sr()}).catch(l=>{It(l,o)})}function Wi(){var n=C,e=D,t=V,r=H;return function(){xe(n),te(e),Et(t),r?.activate()}}function Sr(){xe(null),te(null),Et(null)}function Ut(n){var e=ne|oe,t=D!==null&&(D.f&ne)!==0?D:null;return C===null||t!==null&&(t.f&fe)!==0?e|=fe:C.f|=Dt,{ctx:V,deps:null,effects:null,equals:pr,f:e,fn:n,reactions:null,rv:0,v:Y,wv:0,parent:t??C,ac:null}}function Hi(n,e){let t=C;t===null&&ui();var r=t.b,i=void 0,o=Qe(Y),s=!D,l=new Map;return io(()=>{var a=dr();i=a.promise;try{Promise.resolve(n()).then(a.resolve,a.reject)}catch(f){a.reject(f)}var c=H,d=r.is_pending();s&&(r.update_pending_count(1),d||(c.increment(),l.get(c)?.reject(Ct),l.set(c,a)));const v=(f,g=void 0)=>{d||c.activate(),g?g!==Ct&&(o.f|=Je,At(o,g)):((o.f&Je)!==0&&(o.f^=Je),At(o,f)),s&&(r.update_pending_count(-1),d||c.decrement()),Sr()};a.promise.then(v,f=>v(null,f||"unknown"))}),Ln(()=>{for(const a of l.values())a.reject(Ct)}),new Promise(a=>{function c(d){function v(){d===i?a(o):c(i)}d.then(v,v)}c(i)})}function Yi(n){const e=Ut(n);return qr(e),e}function dn(n){const e=Ut(n);return e.equals=mr,e}function kr(n){var e=n.effects;if(e!==null){n.effects=null;for(var t=0;t<e.length;t+=1)de(e[t])}}function Ji(n){for(var e=n.parent;e!==null;){if((e.f&ne)===0)return e;e=e.parent}return null}function Un(n){var e,t=C;xe(Ji(n));try{kr(n),e=jr(n)}finally{xe(t)}return e}function Er(n){var e=Un(n);if(n.equals(e)||(n.v=e,n.wv=Ur()),!ot){var t=(ze||(n.f&fe)!==0)&&n.deps!==null?Re:J;X(n,t)}}const Ue=new Map;function Qe(n,e){var t={f:0,v:n,reactions:null,equals:pr,rv:0,wv:0};return t}function Oe(n,e){const t=Qe(n);return qr(t),t}function ke(n,e=!1,t=!0){var i;const r=Qe(n);return e||(r.equals=mr),qt&&t&&V!==null&&V.l!==null&&((i=V.l).s??(i.s=[])).push(r),r}function j(n,e,t=!1){D!==null&&(!pe||(D.f&Kn)!==0)&&zt()&&(D.f&(ne|et|cn|Kn))!==0&&!De?.includes(n)&&mi();let r=t?dt(e):e;return At(n,r)}function At(n,e){if(!n.equals(e)){var t=n.v;ot?Ue.set(n,e):Ue.set(n,t),n.v=e;var r=Ie.ensure();r.capture(n,t),(n.f&ne)!==0&&((n.f&oe)!==0&&Un(n),X(n,(n.f&fe)===0?J:Re)),n.wv=Ur(),xr(n,oe),zt()&&C!==null&&(C.f&J)!==0&&(C.f&(Ce|tt))===0&&(le===null?ao([n]):le.push(n))}return e}function Rt(n){j(n,n.v+1)}function xr(n,e){var t=n.reactions;if(t!==null)for(var r=zt(),i=t.length,o=0;o<i;o++){var s=t[o],l=s.f;if(!(!r&&s===C)){var a=(l&oe)===0;a&&X(s,e),(l&ne)!==0?xr(s,Re):a&&((l&et)!==0&&je!==null&&je.push(s),Ze(s))}}}function dt(n){if(typeof n!="object"||n===null||gt in n)return n;const e=Mn(n);if(e!==ri&&e!==ii)return n;var t=new Map,r=sn(n),i=Oe(0),o=Ke,s=l=>{if(Ke===o)return l();var a=D,c=Ke;te(null),rr(o);var d=l();return te(a),rr(c),d};return r&&t.set("length",Oe(n.length)),new Proxy(n,{defineProperty(l,a,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&pi();var d=t.get(a);return d===void 0?d=s(()=>{var v=Oe(c.value);return t.set(a,v),v}):j(d,c.value,!0),!0},deleteProperty(l,a){var c=t.get(a);if(c===void 0){if(a in l){const d=s(()=>Oe(Y));t.set(a,d),Rt(i)}}else j(c,Y),Rt(i);return!0},get(l,a,c){if(a===gt)return n;var d=t.get(a),v=a in l;if(d===void 0&&(!v||vt(l,a)?.writable)&&(d=s(()=>{var g=dt(v?l[a]:Y),u=Oe(g);return u}),t.set(a,d)),d!==void 0){var f=E(d);return f===Y?void 0:f}return Reflect.get(l,a,c)},getOwnPropertyDescriptor(l,a){var c=Reflect.getOwnPropertyDescriptor(l,a);if(c&&"value"in c){var d=t.get(a);d&&(c.value=E(d))}else if(c===void 0){var v=t.get(a),f=v?.v;if(v!==void 0&&f!==Y)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(l,a){if(a===gt)return!0;var c=t.get(a),d=c!==void 0&&c.v!==Y||Reflect.has(l,a);if(c!==void 0||C!==null&&(!d||vt(l,a)?.writable)){c===void 0&&(c=s(()=>{var f=d?dt(l[a]):Y,g=Oe(f);return g}),t.set(a,c));var v=E(c);if(v===Y)return!1}return d},set(l,a,c,d){var v=t.get(a),f=a in l;if(r&&a==="length")for(var g=c;g<v.v;g+=1){var u=t.get(g+"");u!==void 0?j(u,Y):g in l&&(u=s(()=>Oe(Y)),t.set(g+"",u))}if(v===void 0)(!f||vt(l,a)?.writable)&&(v=s(()=>Oe(void 0)),j(v,dt(c)),t.set(a,v));else{f=v.v!==Y;var h=s(()=>dt(c));j(v,h)}var _=Reflect.getOwnPropertyDescriptor(l,a);if(_?.set&&_.set.call(d,c),!f){if(r&&typeof a=="string"){var y=t.get("length"),k=Number(a);Number.isInteger(k)&&k>=y.v&&j(y,k+1)}Rt(i)}return!0},ownKeys(l){E(i);var a=Reflect.ownKeys(l).filter(v=>{var f=t.get(v);return f===void 0||f.v!==Y});for(var[c,d]of t)d.v!==Y&&!(c in l)&&a.push(c);return a},setPrototypeOf(){_i()}})}var Zn,Ir,Ar,Tr;function Ki(){if(Zn===void 0){Zn=window,Ir=/Firefox/.test(navigator.userAgent);var n=Element.prototype,e=Node.prototype,t=Text.prototype;Ar=vt(e,"firstChild").get,Tr=vt(e,"nextSibling").get,Jn(n)&&(n.__click=void 0,n.__className=void 0,n.__attributes=null,n.__style=void 0,n.__e=void 0),Jn(t)&&(t.__t=void 0)}}function Lt(n=""){return document.createTextNode(n)}function tn(n){return Ar.call(n)}function jt(n){return Tr.call(n)}function B(n,e){return tn(n)}function Ee(n,e=!1){{var t=tn(n);return t instanceof Comment&&t.data===""?jt(t):t}}function O(n,e=1,t=!1){let r=n;for(;e--;)r=jt(r);return r}function Xi(n){n.textContent=""}function Dr(){return!1}let Qn=!1;function Zi(){Qn||(Qn=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{if(!n.defaultPrevented)for(const e of n.target.elements)e.__on_r?.()})},{capture:!0}))}function hn(n){var e=D,t=C;te(null),xe(null);try{return n()}finally{te(e),xe(t)}}function Qi(n,e,t,r=t){n.addEventListener(e,()=>hn(t));const i=n.__on_r;i?n.__on_r=()=>{i(),r(!0)}:n.__on_r=()=>r(!0),Zi()}function Br(n){C===null&&D===null&&hi(),D!==null&&(D.f&fe)!==0&&C===null&&di(),ot&&fi()}function eo(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function $e(n,e,t,r=!0){var i=C;i!==null&&(i.f&me)!==0&&(n|=me);var o={ctx:V,deps:null,nodes_start:null,nodes_end:null,f:n|oe,first:null,fn:e,last:null,next:null,parent:i,b:i&&i.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(t)try{Tt(o),o.f|=qn}catch(a){throw de(o),a}else e!==null&&Ze(o);if(r){var s=o;if(t&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Dt)===0&&(s=s.first),s!==null&&(s.parent=i,i!==null&&eo(s,i),D!==null&&(D.f&ne)!==0&&(n&tt)===0)){var l=D;(l.effects??(l.effects=[])).push(s)}}return o}function to(){return D!==null&&!pe}function Ln(n){const e=$e(an,null,!1);return X(e,J),e.teardown=n,e}function er(n){Br();var e=C.f,t=!D&&(e&Ce)!==0&&(e&qn)===0;if(t){var r=V;(r.e??(r.e=[])).push(n)}else return Cr(n)}function Cr(n){return $e(hr|vr,n,!1)}function no(n){return Br(),$e(an|vr,n,!0)}function ro(n){Ie.ensure();const e=$e(tt|Dt,n,!0);return(t={})=>new Promise(r=>{t.outro?pt(e,()=>{de(e),r(void 0)}):(de(e),r(void 0))})}function Dn(n,e){var t=V,r={effect:null,ran:!1,deps:n};t.l.$.push(r),r.effect=vn(()=>{n(),!r.ran&&(r.ran=!0,z(e))})}function Rr(){var n=V;vn(()=>{for(var e of n.l.$){e.deps();var t=e.effect;(t.f&J)!==0&&X(t,Re),Nt(t)&&Tt(t),e.ran=!1}})}function io(n){return $e(cn|Dt,n,!0)}function vn(n,e=0){return $e(an|e,n,!0)}function _e(n,e=[],t=[]){Vi(e,t,r=>{$e(an,()=>n(...r.map(E)),!0)})}function jn(n,e=0){var t=$e(et|e,n,!0);return t}function ge(n,e=!0){return $e(Ce|Dt,n,!0,e)}function $r(n){var e=n.teardown;if(e!==null){const t=ot,r=D;nr(!0),te(null);try{e.call(null)}finally{nr(t),te(r)}}}function Or(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){const i=t.ac;i!==null&&hn(()=>{i.abort(Ct)});var r=t.next;(t.f&tt)!==0?t.parent=null:de(t,e),t=r}}function oo(n){for(var e=n.first;e!==null;){var t=e.next;(e.f&Ce)===0&&de(e),e=t}}function de(n,e=!0){var t=!1;(e||(n.f&ai)!==0)&&n.nodes_start!==null&&n.nodes_end!==null&&(so(n.nodes_start,n.nodes_end),t=!0),Or(n,e&&!t),nn(n,0),X(n,nt);var r=n.transitions;if(r!==null)for(const o of r)o.stop();$r(n);var i=n.parent;i!==null&&i.first!==null&&Fr(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=n.ac=null}function so(n,e){for(;n!==null;){var t=n===e?null:jt(n);n.remove(),n=t}}function Fr(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function pt(n,e){var t=[];Nn(n,t,!0),Mr(t,()=>{de(n),e&&e()})}function Mr(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var i of n)i.out(r)}else e()}function Nn(n,e,t){if((n.f&me)===0){if(n.f^=me,n.transitions!==null)for(const s of n.transitions)(s.is_global||t)&&e.push(s);for(var r=n.first;r!==null;){var i=r.next,o=(r.f&ln)!==0||(r.f&Ce)!==0;Nn(r,e,o?t:!1),r=i}}}function Gn(n){Pr(n,!0)}function Pr(n,e){if((n.f&me)!==0){n.f^=me,(n.f&J)===0&&(X(n,oe),Ze(n));for(var t=n.first;t!==null;){var r=t.next,i=(t.f&ln)!==0||(t.f&Ce)!==0;Pr(t,i?e:!1),t=r}if(n.transitions!==null)for(const o of n.transitions)(o.is_global||e)&&o.in()}}let _t=!1;function tr(n){_t=n}let ot=!1;function nr(n){ot=n}let D=null,pe=!1;function te(n){D=n}let C=null;function xe(n){C=n}let De=null;function qr(n){D!==null&&(De===null?De=[n]:De.push(n))}let Z=null,re=0,le=null;function ao(n){le=n}let zr=1,Ot=0,Ke=Ot;function rr(n){Ke=n}let ze=!1;function Ur(){return++zr}function Nt(n){var e=n.f;if((e&oe)!==0)return!0;if((e&Re)!==0){var t=n.deps,r=(e&fe)!==0;if(t!==null){var i,o,s=(e&en)!==0,l=r&&C!==null&&!ze,a=t.length;if((s||l)&&(C===null||(C.f&nt)===0)){var c=n,d=c.parent;for(i=0;i<a;i++)o=t[i],(s||!o?.reactions?.includes(c))&&(o.reactions??(o.reactions=[])).push(c);s&&(c.f^=en),l&&d!==null&&(d.f&fe)===0&&(c.f^=fe)}for(i=0;i<a;i++)if(o=t[i],Nt(o)&&Er(o),o.wv>n.wv)return!0}(!r||C!==null&&!ze)&&X(n,J)}return!1}function Lr(n,e,t=!0){var r=n.reactions;if(r!==null&&!De?.includes(n))for(var i=0;i<r.length;i++){var o=r[i];(o.f&ne)!==0?Lr(o,e,!1):e===o&&(t?X(o,oe):(o.f&J)!==0&&X(o,Re),Ze(o))}}function jr(n){var h;var e=Z,t=re,r=le,i=D,o=ze,s=De,l=V,a=pe,c=Ke,d=n.f;Z=null,re=0,le=null,ze=(d&fe)!==0&&(pe||!_t||D===null),D=(d&(Ce|tt))===0?n:null,De=null,Et(n.ctx),pe=!1,Ke=++Ot,n.ac!==null&&(hn(()=>{n.ac.abort(Ct)}),n.ac=null);try{n.f|=kn;var v=n.fn,f=v(),g=n.deps;if(Z!==null){var u;if(nn(n,re),g!==null&&re>0)for(g.length=re+Z.length,u=0;u<Z.length;u++)g[re+u]=Z[u];else n.deps=g=Z;if(!ze||(d&ne)!==0&&n.reactions!==null)for(u=re;u<g.length;u++)((h=g[u]).reactions??(h.reactions=[])).push(n)}else g!==null&&re<g.length&&(nn(n,re),g.length=re);if(zt()&&le!==null&&!pe&&g!==null&&(n.f&(ne|Re|oe))===0)for(u=0;u<le.length;u++)Lr(le[u],n);return i!==null&&i!==n&&(Ot++,le!==null&&(r===null?r=le:r.push(...le))),(n.f&Je)!==0&&(n.f^=Je),f}catch(_){return wr(_)}finally{n.f^=kn,Z=e,re=t,le=r,D=i,ze=o,De=s,Et(l),pe=a,Ke=c}}function lo(n,e){let t=e.reactions;if(t!==null){var r=ni.call(t,n);if(r!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[r]=t[i],t.pop())}}t===null&&(e.f&ne)!==0&&(Z===null||!Z.includes(e))&&(X(e,Re),(e.f&(fe|en))===0&&(e.f^=en),kr(e),nn(e,0))}function nn(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)lo(n,t[r])}function Tt(n){var e=n.f;if((e&nt)===0){X(n,J);var t=C,r=_t;C=n,_t=!0;try{(e&et)!==0?oo(n):Or(n),$r(n);var i=jr(n);n.teardown=typeof i=="function"?i:null,n.wv=zr;var o;ur&&Ri&&(n.f&oe)!==0&&n.deps}finally{_t=r,C=t}}}function E(n){var e=n.f,t=(e&ne)!==0;if(D!==null&&!pe){var r=C!==null&&(C.f&nt)!==0;if(!r&&!De?.includes(n)){var i=D.deps;if((D.f&kn)!==0)n.rv<Ot&&(n.rv=Ot,Z===null&&i!==null&&i[re]===n?re++:Z===null?Z=[n]:(!ze||!Z.includes(n))&&Z.push(n));else{(D.deps??(D.deps=[])).push(n);var o=n.reactions;o===null?n.reactions=[D]:o.includes(D)||o.push(D)}}}else if(t&&n.deps===null&&n.effects===null){var s=n,l=s.parent;l!==null&&(l.f&fe)===0&&(s.f^=fe)}if(ot){if(Ue.has(n))return Ue.get(n);if(t){s=n;var a=s.v;return((s.f&J)===0&&s.reactions!==null||Nr(s))&&(a=Un(s)),Ue.set(s,a),a}}else t&&(s=n,Nt(s)&&Er(s));if((n.f&Je)!==0)throw n.v;return n.v}function Nr(n){if(n.v===Y)return!0;if(n.deps===null)return!1;for(const e of n.deps)if(Ue.has(e)||(e.f&ne)!==0&&Nr(e))return!0;return!1}function z(n){var e=pe;try{return pe=!0,n()}finally{pe=e}}const co=-7169;function X(n,e){n.f=n.f&co|e}function mt(n){if(!(typeof n!="object"||!n||n instanceof EventTarget)){if(gt in n)Bn(n);else if(!Array.isArray(n))for(let e in n){const t=n[e];typeof t=="object"&&t&&gt in t&&Bn(t)}}}function Bn(n,e=new Set){if(typeof n=="object"&&n!==null&&!(n instanceof EventTarget)&&!e.has(n)){e.add(n),n instanceof Date&&n.getTime();for(let r in n)try{Bn(n[r],e)}catch{}const t=Mn(n);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const r=fr(t);for(let i in r){const o=r[i].get;if(o)try{o.call(n)}catch{}}}}}const uo=["touchstart","touchmove"];function fo(n){return uo.includes(n)}const ho=new Set,ir=new Set;function vo(n,e,t,r={}){function i(o){if(r.capture||Bt.call(e,o),!o.cancelBubble)return hn(()=>t?.call(this,o))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?xt(()=>{e.addEventListener(n,i,r)}):e.addEventListener(n,i,r),i}function Be(n,e,t,r,i){var o={capture:r,passive:i},s=vo(n,e,t,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ln(()=>{e.removeEventListener(n,s,o)})}let or=null;function Bt(n){var e=this,t=e.ownerDocument,r=n.type,i=n.composedPath?.()||[],o=i[0]||n.target;or=n;var s=0,l=or===n&&n.__root;if(l){var a=i.indexOf(l);if(a!==-1&&(e===document||e===window)){n.__root=e;return}var c=i.indexOf(e);if(c===-1)return;a<=c&&(s=a)}if(o=i[s]||n.target,o!==e){Zt(n,"currentTarget",{configurable:!0,get(){return o||t}});var d=D,v=C;te(null),xe(null);try{for(var f,g=[];o!==null;){var u=o.assignedSlot||o.parentNode||o.host||null;try{var h=o["__"+r];if(h!=null&&(!o.disabled||n.target===o))if(sn(h)){var[_,...y]=h;_.apply(o,[n,...y])}else h.call(o,n)}catch(k){f?g.push(k):f=k}if(n.cancelBubble||u===e||u===null)break;o=u}if(f){for(let k of g)queueMicrotask(()=>{throw k});throw f}}finally{n.__root=e,delete n.currentTarget,te(d),xe(v)}}}function go(n){var e=document.createElement("template");return e.innerHTML=n.replaceAll("<!>","<!---->"),e.content}function Cn(n,e){var t=C;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function q(n,e){var t=(e&Ai)!==0,r=(e&Ti)!==0,i,o=!n.startsWith("<!>");return()=>{i===void 0&&(i=go(o?n:"<!>"+n),t||(i=tn(i)));var s=r||Ir?document.importNode(i,!0):i.cloneNode(!0);if(t){var l=tn(s),a=s.lastChild;Cn(l,a)}else Cn(s,s);return s}}function Xt(){var n=document.createDocumentFragment(),e=document.createComment(""),t=Lt();return n.append(e,t),Cn(e,t),n}function M(n,e){n!==null&&n.before(e)}function ie(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t+"")}function po(n,e){return _o(n,e)}const ct=new Map;function _o(n,{target:e,anchor:t,props:r={},events:i,context:o,intro:s=!0}){Ki();var l=new Set,a=v=>{for(var f=0;f<v.length;f++){var g=v[f];if(!l.has(g)){l.add(g);var u=fo(g);e.addEventListener(g,Bt,{passive:u});var h=ct.get(g);h===void 0?(document.addEventListener(g,Bt,{passive:u}),ct.set(g,1)):ct.set(g,h+1)}}};a(Fn(ho)),ir.add(a);var c=void 0,d=ro(()=>{var v=t??e.appendChild(Lt());return Ui(v,{pending:()=>{}},f=>{if(o){rt({});var g=V;g.c=o}i&&(r.$$events=i),c=n(f,r)||{},o&&it()}),()=>{for(var f of l){e.removeEventListener(f,Bt);var g=ct.get(f);--g===0?(document.removeEventListener(f,Bt),ct.delete(f)):ct.set(f,g)}ir.delete(a),v!==t&&v.parentNode?.removeChild(v)}});return mo.set(c,d),c}let mo=new WeakMap;function N(n,e,t=!1){var r=n,i=null,o=null,s=Y,l=t?ln:0,a=!1;const c=(g,u=!0)=>{a=!0,f(u,g)};var d=null;function v(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var g=s?i:o,u=s?o:i;g&&Gn(g),u&&pt(u,()=>{s?o=null:i=null})}const f=(g,u)=>{if(s!==(s=g)){var h=Dr(),_=r;if(h&&(d=document.createDocumentFragment(),d.append(_=Lt())),s?i??(i=u&&ge(()=>u(_))):o??(o=u&&ge(()=>u(_))),h){var y=H,k=s?i:o,p=s?o:i;k&&y.skipped_effects.delete(k),p&&y.skipped_effects.add(p),y.add_callback(v)}else v()}};jn(()=>{a=!1,e(c),a||f(null,null)},l)}function Gr(n,e){return e}function wo(n,e,t){for(var r=n.items,i=[],o=e.length,s=0;s<o;s++)Nn(e[s].e,i,!0);var l=o>0&&i.length===0&&t!==null;if(l){var a=t.parentNode;Xi(a),a.append(t),r.clear(),we(n,e[0].prev,e[o-1].next)}Mr(i,()=>{for(var c=0;c<o;c++){var d=e[c];l||(r.delete(d.k),we(n,d.prev,d.next)),de(d.e,!l)}})}function Vr(n,e,t,r,i,o=null){var s=n,l={flags:e,items:new Map,first:null},a=(e&gr)!==0;if(a){var c=n;s=c.appendChild(Lt())}var d=null,v=!1,f=new Map,g=dn(()=>{var y=t();return sn(y)?y:y==null?[]:Fn(y)}),u,h;function _(){bo(h,u,l,f,s,i,e,r,t),o!==null&&(u.length===0?d?Gn(d):d=ge(()=>o(s)):d!==null&&pt(d,()=>{d=null}))}jn(()=>{h??(h=C),u=E(g);var y=u.length;if(!(v&&y===0)){v=y===0;var k,p,m,x;if(Dr()){var S=new Set,w=H;for(p=0;p<y;p+=1){m=u[p],x=r(m,p);var I=l.items.get(x)??f.get(x);I?(e&(un|fn))!==0&&Wr(I,m,p,e):(k=Hr(null,l,null,null,m,x,p,i,e,t,!0),f.set(x,k)),S.add(x)}for(const[R,A]of l.items)S.has(R)||w.skipped_effects.add(A.e);w.add_callback(_)}else _();E(g)}})}function bo(n,e,t,r,i,o,s,l,a){var c=(s&bi)!==0,d=(s&(un|fn))!==0,v=e.length,f=t.items,g=t.first,u=g,h,_=null,y,k=[],p=[],m,x,S,w;if(c)for(w=0;w<v;w+=1)m=e[w],x=l(m,w),S=f.get(x),S!==void 0&&(S.a?.measure(),(y??(y=new Set)).add(S));for(w=0;w<v;w+=1){if(m=e[w],x=l(m,w),S=f.get(x),S===void 0){var I=r.get(x);if(I!==void 0){r.delete(x),f.set(x,I);var R=_?_.next:u;we(t,_,I),we(t,I,R),wn(I,R,i),_=I}else{var A=u?u.e.nodes_start:i;_=Hr(A,t,_,_===null?t.first:_.next,m,x,w,o,s,a)}f.set(x,_),k=[],p=[],u=_.next;continue}if(d&&Wr(S,m,w,s),(S.e.f&me)!==0&&(Gn(S.e),c&&(S.a?.unfix(),(y??(y=new Set)).delete(S))),S!==u){if(h!==void 0&&h.has(S)){if(k.length<p.length){var F=p[0],$;_=F.prev;var U=k[0],se=k[k.length-1];for($=0;$<k.length;$+=1)wn(k[$],F,i);for($=0;$<p.length;$+=1)h.delete(p[$]);we(t,U.prev,se.next),we(t,_,U),we(t,se,F),u=F,_=se,w-=1,k=[],p=[]}else h.delete(S),wn(S,u,i),we(t,S.prev,S.next),we(t,S,_===null?t.first:_.next),we(t,_,S),_=S;continue}for(k=[],p=[];u!==null&&u.k!==x;)(u.e.f&me)===0&&(h??(h=new Set)).add(u),p.push(u),u=u.next;if(u===null)continue;S=u}k.push(S),_=S,u=S.next}if(u!==null||h!==void 0){for(var G=h===void 0?[]:Fn(h);u!==null;)(u.e.f&me)===0&&G.push(u),u=u.next;var L=G.length;if(L>0){var W=(s&gr)!==0&&v===0?i:null;if(c){for(w=0;w<L;w+=1)G[w].a?.measure();for(w=0;w<L;w+=1)G[w].a?.fix()}wo(t,G,W)}}c&&xt(()=>{if(y!==void 0)for(S of y)S.a?.apply()}),n.first=t.first&&t.first.e,n.last=_&&_.e;for(var st of r.values())de(st.e);r.clear()}function Wr(n,e,t,r){(r&un)!==0&&At(n.v,e),(r&fn)!==0?At(n.i,t):n.i=t}function Hr(n,e,t,r,i,o,s,l,a,c,d){var v=(a&un)!==0,f=(a&yi)===0,g=v?f?ke(i,!1,!1):Qe(i):i,u=(a&fn)===0?s:Qe(s),h={i:u,v:g,k:o,a:null,e:null,prev:t,next:r};try{if(n===null){var _=document.createDocumentFragment();_.append(n=Lt())}return h.e=ge(()=>l(n,g,u,c),Ci),h.e.prev=t&&t.e,h.e.next=r&&r.e,t===null?d||(e.first=h):(t.next=h,t.e.next=h.e),r!==null&&(r.prev=h,r.e.prev=h.e),h}finally{}}function wn(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,o=n.e.nodes_start;o!==null&&o!==r;){var s=jt(o);i.before(o),o=s}}function we(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}const sr=[...` 	
\r\f \v\uFEFF`];function yo(n,e,t){var r=n==null?"":""+n;if(e&&(r=r?r+" "+e:e),t){for(var i in t)if(t[i])r=r?r+" "+i:i;else if(r.length)for(var o=i.length,s=0;(s=r.indexOf(i,s))>=0;){var l=s+o;(s===0||sr.includes(r[s-1]))&&(l===r.length||sr.includes(r[l]))?r=(s===0?"":r.substring(0,s))+r.substring(l+1):s=l}}return r===""?null:r}function $t(n,e,t,r,i,o){var s=n.__className;if(s!==t||s===void 0){var l=yo(t,r,o);l==null?n.removeAttribute("class"):n.className=l,n.__className=t}else if(o&&i!==o)for(var a in o){var c=!!o[a];(i==null||c!==!!i[a])&&n.classList.toggle(a,c)}return o}const So=Symbol("is custom element"),ko=Symbol("is html");function Xe(n,e,t,r){var i=Eo(n);i[e]!==(i[e]=t)&&(e==="loading"&&(n[ci]=t),t==null?n.removeAttribute(e):typeof t!="string"&&xo(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Eo(n){return n.__attributes??(n.__attributes={[So]:n.nodeName.includes("-"),[ko]:n.namespaceURI===Di})}var ar=new Map;function xo(n){var e=n.getAttribute("is")||n.nodeName,t=ar.get(e);if(t)return t;ar.set(e,t=[]);for(var r,i=n,o=Element.prototype;o!==i;){r=fr(i);for(var s in r)r[s].set&&t.push(s);i=Mn(i)}return t}function Io(n,e,t=e){Qi(n,"change",r=>{var i=r?n.defaultChecked:n.checked;t(i)}),z(e)==null&&t(n.checked),vn(()=>{var r=e();n.checked=!!r})}function Gt(n=!1){const e=V,t=e.l.u;if(!t)return;let r=()=>mt(e.s);if(n){let i=0,o={};const s=Ut(()=>{let l=!1;const a=e.s;for(const c in a)a[c]!==o[c]&&(o[c]=a[c],l=!0);return l&&i++,i});r=()=>E(s)}t.b.length&&no(()=>{lr(e,r),Qt(t.b)}),er(()=>{const i=z(()=>t.m.map(oi));return()=>{for(const o of i)typeof o=="function"&&o()}}),t.a.length&&er(()=>{lr(e,r),Qt(t.a)})}function lr(n,e){if(n.l.s)for(const t of n.l.s)E(t);e()}function Ao(n,e){var t=n.$$events?.[e.type],r=sn(t)?t.slice():t==null?[]:[t];for(var i of r)i.call(this,e)}function Vn(n,e,t){if(n==null)return e(void 0),t&&t(void 0),Te;const r=z(()=>n.subscribe(e,t));return r.unsubscribe?()=>r.unsubscribe():r}const ut=[];function To(n,e){return{subscribe:Wn(n,e).subscribe}}function Wn(n,e=Te){let t=null;const r=new Set;function i(l){if(_r(n,l)&&(n=l,t)){const a=!ut.length;for(const c of r)c[1](),ut.push(c,n);if(a){for(let c=0;c<ut.length;c+=2)ut[c][0](ut[c+1]);ut.length=0}}}function o(l){i(l(n))}function s(l,a=Te){const c=[l,a];return r.add(c),r.size===1&&(t=e(i,o)||Te),l(n),()=>{r.delete(c),r.size===0&&t&&(t(),t=null)}}return{set:i,update:o,subscribe:s}}function bn(n,e,t){const r=!Array.isArray(n),i=r?[n]:n;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return To(t,(s,l)=>{let a=!1;const c=[];let d=0,v=Te;const f=()=>{if(d)return;v();const u=e(r?c[0]:c,s,l);o?s(u):v=typeof u=="function"?u:Te},g=i.map((u,h)=>Vn(u,_=>{c[h]=_,d&=~(1<<h),a&&f()},()=>{d|=1<<h}));return a=!0,f(),function(){Qt(g),v(),a=!1}})}function Do(n){let e;return Vn(n,t=>e=t)(),e}let Ht=!1,Rn=Symbol();function gn(n,e,t){const r=t[e]??(t[e]={store:null,source:ke(void 0),unsubscribe:Te});if(r.store!==n&&!(Rn in t))if(r.unsubscribe(),r.store=n??null,n==null)r.source.v=void 0,r.unsubscribe=Te;else{var i=!0;r.unsubscribe=Vn(n,o=>{i?r.source.v=o:j(r.source,o)}),i=!1}return n&&Rn in t?Do(n):E(r.source)}function pn(){const n={};function e(){Ln(()=>{for(var t in n)n[t].unsubscribe();Zt(n,Rn,{enumerable:!1,value:!0})})}return[n,e]}function Bo(n){var e=Ht;try{return Ht=!1,[n(),Ht]}finally{Ht=e}}function Le(n,e,t,r){var i=!qt||(t&ki)!==0,o=(t&xi)!==0,s=(t&Ii)!==0,l=r,a=!0,c=()=>(a&&(a=!1,l=s?z(r):r),l),d;if(o){var v=gt in n||li in n;d=vt(n,e)?.set??(v&&e in n?p=>n[e]=p:void 0)}var f,g=!1;o?[f,g]=Bo(()=>n[e]):f=n[e],f===void 0&&r!==void 0&&(f=c(),d&&(i&&gi(),d(f)));var u;if(i?u=()=>{var p=n[e];return p===void 0?c():(a=!0,p)}:u=()=>{var p=n[e];return p!==void 0&&(l=void 0),p===void 0?l:p},i&&(t&Ei)===0)return u;if(d){var h=n.$$legacy;return(function(p,m){return arguments.length>0?((!i||!m||h||g)&&d(m?u():p),p):u()})}var _=!1,y=((t&Si)!==0?Ut:dn)(()=>(_=!1,u()));o&&E(y);var k=C;return(function(p,m){if(arguments.length>0){const x=m?E(y):i&&o?dt(p):p;return j(y,x),_=!0,l!==void 0&&(l=x),p}return ot&&_||(k.f&nt)!==0?y.v:E(y)})}const Co="5";var cr;typeof window<"u"&&((cr=window.__svelte??(window.__svelte={})).v??(cr.v=new Set)).add(Co);$i();function Ro(){const{subscribe:n,set:e}=Wn("local");return{subscribe:n,setTab:t=>e(t)}}const $n=Ro();class Ae extends EventTarget{constructor(){super(),this.setupDebugLogging()}static getInstance(){return Ae.instance||(Ae.instance=new Ae),Ae.instance}dispatch(e){const t=new CustomEvent("app:event",{detail:e,bubbles:!1,cancelable:!1});this.dispatchEvent(t)}on(e,t){const r=i=>{const o=i;o.detail.type===e&&t(o.detail)};return this.addEventListener("app:event",r),()=>this.removeEventListener("app:event",r)}onAll(e){const t=r=>{e(r.detail)};return this.addEventListener("app:event",t),()=>this.removeEventListener("app:event",t)}once(e,t){let r=null;const i=o=>{t(o),r&&r()};return r=this.on(e,i),r}clearAllListeners(){const e=this._listeners;e&&Object.keys(e).forEach(t=>{delete e[t]})}setupDebugLogging(){typeof window<"u"&&localStorage.getItem("debugBridge")==="true"&&this.onAll(e=>{console.log("[AppBridge]",e.type,e)})}}typeof window<"u"&&(window.enableBridgeDebug=()=>{localStorage.setItem("debugBridge","true"),console.log("AppBridge debug logging enabled. Reload the page to see events.")},window.disableBridgeDebug=()=>{localStorage.removeItem("debugBridge"),console.log("AppBridge debug logging disabled.")});var $o=q('<nav class="tabs sv-tab-nav svelte-1mmy281" aria-label="Main navigation"><button>📁 Local Files</button> <button>☁️ Google Drive</button> <button>📦 Box</button></nav>');function Oo(n,e){rt(e,!1);const t=()=>gn($n,"$currentTab",r),[r,i]=pn(),o=Ae.getInstance();function s(u){$n.setTab(u),o.dispatch({type:"tab:changed",tab:u})}Gt();var l=$o(),a=B(l);let c;var d=O(a,2);let v;var f=O(d,2);let g;_e((u,h,_)=>{c=$t(a,1,"tab-button svelte-1mmy281",null,c,u),Xe(a,"aria-current",t()==="local"?"page":void 0),v=$t(d,1,"tab-button svelte-1mmy281",null,v,h),Xe(d,"aria-current",t()==="googleDrive"?"page":void 0),g=$t(f,1,"tab-button svelte-1mmy281",null,g,_),Xe(f,"aria-current",t()==="box"?"page":void 0)},[()=>({active:t()==="local"}),()=>({active:t()==="googleDrive"}),()=>({active:t()==="box"})]),Be("click",a,()=>s("local")),Be("click",d,()=>s("googleDrive")),Be("click",f,()=>s("box")),M(n,l),it(),i()}var Fo=q("<p>Processing...</p>"),Mo=q('<div class="file-upload-wrapper svelte-heqs4d"><label class="file-upload-label svelte-heqs4d">Upload a file</label> <input type="file"/> <!></div>');function Po(n,e){let t=Le(e,"id",8),r=Le(e,"processing",8,!1),i=Le(e,"accept",8,"audio/*");var o=Mo(),s=B(o),l=O(s,2),a=O(l,2);{var c=d=>{var v=Fo();M(d,v)};N(a,d=>{r()&&d(c)})}_e(()=>{Xe(s,"for",t()),Xe(l,"id",t()),Xe(l,"accept",i()),l.disabled=r()}),Be("change",l,function(d){Ao.call(this,e,d)}),M(n,o)}var qo=q("<span> </span>");function zo(n,e){rt(e,!1);const t=ke();let r=Le(e,"status",8);const i={pass:{icon:"✓",class:"badge-success",text:"Pass"},fail:{icon:"✗",class:"badge-danger",text:"Fail"},warning:{icon:"⚠",class:"badge-warning",text:"Warning"},error:{icon:"✗",class:"badge-danger",text:"Error"}};Dn(()=>mt(r()),()=>{j(t,i[r()]||i.error)}),Rr();var o=qo(),s=B(o);_e(()=>{$t(o,1,`badge ${E(t),z(()=>E(t).class)??""}`,"svelte-1hqr9xd"),ie(s,`${E(t),z(()=>E(t).icon)??""} ${E(t),z(()=>E(t).text)??""}`)}),M(n,o),it()}var Uo=q('<div class="batch-summary svelte-1bx7qjq"><h3>Summary</h3> <p> </p></div>'),Lo=q('<th class="svelte-1bx7qjq">Sample Rate</th> <th class="svelte-1bx7qjq">Bit Depth</th> <th class="svelte-1bx7qjq">Channels</th> <th class="svelte-1bx7qjq">Duration</th>',1),jo=q('<th class="svelte-1bx7qjq">Play</th>'),No=q('<td class="svelte-1bx7qjq"> </td> <td class="svelte-1bx7qjq"> </td> <td class="svelte-1bx7qjq"> </td> <td class="svelte-1bx7qjq"> </td>',1),Go=q("<audio controls></audio>"),Vo=q('<td class="svelte-1bx7qjq"><!></td>'),Wo=q('<tr><td class="svelte-1bx7qjq"> </td><td class="svelte-1bx7qjq"><!></td><!><td class="svelte-1bx7qjq"> </td><!></tr>'),Ho=q('<div class="results-container svelte-1bx7qjq"><!> <table class="results-table svelte-1bx7qjq"><thead><tr><th class="svelte-1bx7qjq">Filename</th><th class="svelte-1bx7qjq">Status</th><!><th class="svelte-1bx7qjq">File Size</th><!></tr></thead><tbody></tbody></table></div>');function Yo(n,e){rt(e,!1);const t=ke(),r=ke();let i=Le(e,"results",24,()=>[]),o=Le(e,"mode",8,"single"),s=Le(e,"metadataOnly",8,!1);function l(p,m=2){if(p===0)return"0 Bytes";const x=1024,S=m<0?0:m,w=["Bytes","KB","MB","GB","TB"],I=Math.floor(Math.log(p)/Math.log(x));return parseFloat((p/Math.pow(x,I)).toFixed(S))+" "+w[I]}Dn(()=>mt(o()),()=>{j(t,o()==="single")}),Dn(()=>(mt(o()),mt(i())),()=>{j(r,o()==="batch"?{total:i().length,passed:i().filter(p=>p.status==="pass").length,failed:i().filter(p=>p.status==="fail").length,warnings:i().filter(p=>p.status==="warning").length,errors:i().filter(p=>p.status==="error").length}:null)}),Rr(),Gt();var a=Ho(),c=B(a);{var d=p=>{var m=Uo(),x=O(B(m),2),S=B(x);_e(()=>ie(S,`${E(r),z(()=>E(r).total)??""} files: ${E(r),z(()=>E(r).passed)??""} passed, ${E(r),z(()=>E(r).failed)??""} failed`)),M(p,m)};N(c,p=>{o()==="batch"&&E(r)&&p(d)})}var v=O(c,2),f=B(v),g=B(f),u=O(B(g),2);{var h=p=>{var m=Lo();M(p,m)};N(u,p=>{s()||p(h)})}var _=O(u,2);{var y=p=>{var m=jo();M(p,m)};N(_,p=>{E(t)&&p(y)})}var k=O(f);Vr(k,5,i,Gr,(p,m)=>{var x=Wo(),S=B(x),w=B(S),I=O(S),R=B(I);zo(R,{get status(){return E(m),z(()=>E(m).status)}});var A=O(I);{var F=L=>{var W=No(),st=Ee(W),_n=B(st),at=O(st,2),Vt=B(at),Hn=O(at,2),Xr=B(Hn),Zr=O(Hn,2),Qr=B(Zr);_e(()=>{ie(_n,`${E(m),z(()=>E(m).sampleRate)??""} Hz`),ie(Vt,`${E(m),z(()=>E(m).bitDepth)??""} bit`),ie(Xr,(E(m),z(()=>E(m).channels))),ie(Qr,`${E(m),z(()=>E(m).duration)??""}s`)}),M(L,W)};N(A,L=>{s()||L(F)})}var $=O(A),U=B($),se=O($);{var G=L=>{var W=Vo(),st=B(W);{var _n=at=>{var Vt=Go();_e(()=>Xe(Vt,"src",(E(m),z(()=>E(m).audioUrl)))),M(at,Vt)};N(st,at=>{E(m),z(()=>E(m).audioUrl)&&at(_n)})}M(L,W)};N(se,L=>{E(t)&&L(G)})}_e(L=>{ie(w,(E(m),z(()=>E(m).filename))),ie(U,L)},[()=>(E(m),z(()=>l(E(m).fileSize)))]),M(p,x)}),M(n,a),it()}var Jo=q("<span> </span>"),Ko=q("<div><strong> </strong> <!></div>"),Xo=q('<div class="validation-display svelte-jf5q0v"><h3>Validation Details</h3> <!></div>');function Zo(n,e){let t=Le(e,"validation",8);var r=Xt(),i=Ee(r);{var o=s=>{var l=Xo(),a=O(B(l),2);Vr(a,1,()=>(mt(t()),z(()=>Object.entries(t()))),Gr,(c,d)=>{var v=Yi(()=>si(E(d),2));let f=()=>E(v)[0],g=()=>E(v)[1];var u=Ko(),h=B(u),_=B(h),y=O(h),k=O(y);{var p=m=>{var x=Jo(),S=B(x);_e(()=>ie(S,`(${g(),z(()=>g().issue)??""})`)),M(m,x)};N(k,m=>{g(),z(()=>g().issue)&&m(p)})}_e(()=>{$t(u,1,`validation-item ${g(),z(()=>g().status)??""}`,"svelte-jf5q0v"),ie(_,`${f()??""}:`),ie(y,` ${g(),z(()=>g().value)??""} `)}),M(c,u)}),M(s,l)};N(i,s=>{t()&&s(o)})}M(n,r)}class Qo{constructor(){this.audioContext=null,this.audioBuffer=null}async analyzeFile(e){const t=await e.arrayBuffer();if(e.name.toLowerCase().endsWith(".wav")){const r=new DataView(t),i=this.parseWavHeaders(r);let o=this.getFileType(e.name);return o==="WAV"&&(i.audioFormat===1?o="WAV (PCM)":typeof i.audioFormat=="number"?o=`WAV (Compressed - Format ${i.audioFormat})`:o="WAV (Unknown Format)"),{fileType:o,sampleRate:i.sampleRate,channels:i.channels,bitDepth:i.bitDepth,duration:i.duration,fileSize:e.size}}this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext));try{const r=t.slice(0);return this.audioBuffer=await this.audioContext.decodeAudioData(r),{fileType:this.getFileType(e.name),sampleRate:this.audioBuffer.sampleRate,channels:this.audioBuffer.numberOfChannels,duration:this.audioBuffer.duration,fileSize:e.size,bitDepth:this.estimateBitDepth(t,e.name)}}catch{return await this.analyzeFileHeaders(t,e.name,e.size)}}async analyzeFileHeaders(e,t,r){const i=new DataView(e),o={fileType:this.getFileType(t),fileSize:r};if(t.toLowerCase().endsWith(".wav")){const s=this.parseWavHeaders(i);Object.assign(o,s)}else o.sampleRate="Unknown",o.bitDepth="Unknown",o.channels="Unknown",o.duration="Unknown";return o}parseWavHeaders(e){try{if(String.fromCharCode(e.getUint8(0),e.getUint8(1),e.getUint8(2),e.getUint8(3))!=="RIFF")throw new Error("Not a valid WAV file");if(String.fromCharCode(e.getUint8(8),e.getUint8(9),e.getUint8(10),e.getUint8(11))!=="WAVE")throw new Error("Not a valid WAV file");let i=12;for(;i<e.byteLength-8;){const o=String.fromCharCode(e.getUint8(i),e.getUint8(i+1),e.getUint8(i+2),e.getUint8(i+3)),s=e.getUint32(i+4,!0);if(o==="fmt "){const l=e.getUint16(i+8,!0),a=e.getUint16(i+10,!0),c=e.getUint32(i+12,!0),d=e.getUint16(i+22,!0),v=this.calculateWavDuration(e,c,a,d);return{sampleRate:c,channels:a,bitDepth:d,duration:v,audioFormat:l}}i+=8+s}throw new Error("fmt chunk not found")}catch(t){return console.error("Error parsing WAV headers:",t),{sampleRate:"Unknown",channels:"Unknown",bitDepth:"Unknown",duration:"Unknown",audioFormat:"Unknown"}}}calculateWavDuration(e,t,r,i){try{let o=12;for(;o<e.byteLength-8;){const s=String.fromCharCode(e.getUint8(o),e.getUint8(o+1),e.getUint8(o+2),e.getUint8(o+3)),l=e.getUint32(o+4,!0);if(s==="data"){const a=i/8;return l/(r*a)/t}o+=8+l}return"Unknown"}catch{return"Unknown"}}getFileType(e){const t=e.split(".").pop().toLowerCase();return{wav:"WAV",mp3:"MP3",flac:"FLAC",aac:"AAC",m4a:"M4A",ogg:"OGG",webm:"WebM"}[t]||t.toUpperCase()}estimateBitDepth(e,t){if(t.toLowerCase().endsWith(".wav"))return"See WAV analysis";const r=t.split(".").pop().toLowerCase();return["mp3","aac","m4a"].includes(r)?"Compressed (variable)":"Unknown"}}class es{constructor(){this.analysisInProgress=!1}async analyzeAudioBuffer(e,t=null){const r=e.sampleRate,i=e.numberOfChannels,o=e.length,s=[];for(let l=0;l<i;l++)s.push(e.getChannelData(l));this.analysisInProgress=!0;try{t&&t("Analyzing peak levels...",0);let l=0;for(let y=0;y<i;y++){const k=s[y];for(let p=0;p<o;p++){if(!this.analysisInProgress)throw new Error("Analysis cancelled");const m=Math.abs(k[p]);if(m>l&&(l=m),p%1e4===0){const x=(y*o+p)/(i*o)*.5;t&&t("Analyzing peak levels...",x),p%1e5===0&&await new Promise(S=>setTimeout(S,1))}}}const a=l>0?20*Math.log10(l):-1/0;t&&t("Analyzing noise floor...",.5);const c=await this.analyzeNoiseFloor(s,i,o,t),d=await this.analyzeNoiseFloorHistogram(s,i,o);t&&t("Checking normalization...",.9);const v=this.checkNormalization(a);t&&t("Estimating reverb...",.95);const f=await this.estimateReverb(s,i,o,r,d),g=this.interpretReverb(f);t&&t("Analyzing silence...",.98);const{leadingSilence:u,trailingSilence:h,longestSilence:_}=this.analyzeSilence(s,i,o,r,d,a);return t&&t("Analysis complete!",1),{peakDb:a,noiseFloorDb:c,noiseFloorDbHistogram:d,normalizationStatus:v,reverbInfo:g,leadingSilence:u,trailingSilence:h,longestSilence:_}}finally{this.analysisInProgress=!1}}interpretReverb(e){return e<=0?{time:e,label:"N/A",description:"No reverb detected."}:e<.3?{time:e,label:"Excellent (Dry)",description:"Ideal for voiceover. Matches a vocal booth or well-treated studio environment."}:e<.5?{time:e,label:"Good (Controlled)",description:"A well-controlled room with minimal reflections. Acceptable for most recording."}:e<.8?{time:e,label:"Fair (Slightly Live)",description:"Noticeable room reflections. May reduce clarity for voiceover work."}:e<1.2?{time:e,label:"Poor (Reverberant)",description:"Significant reverb is present, making the recording sound distant and unprofessional."}:{time:e,label:"Very Poor (Echoey)",description:"Excessive echo and reverb. Unsuitable for professional voice recording."}}analyzeSilence(e,t,r,i,o,s){const l=s-o,a=.25,c=Math.max(0,l),d=o+c*a,v=Math.pow(10,d/20),f=50,g=Math.floor(i*(f/1e3)),u=Math.ceil(r/g),_=Math.ceil(150/f),y=new Array(u).fill(0);for(let A=0;A<u;A++){const F=A*g,$=Math.min(F+g,r);let U=0;for(let se=0;se<t;se++){const G=e[se];for(let L=F;L<$;L++){const W=Math.abs(G[L]);W>U&&(U=W)}}U>v&&(y[A]=1)}let k=0;for(let A=0;A<u;A++)if(y[A]===1)k++;else{if(k>0&&k<_)for(let F=1;F<=k;F++)y[A-F]=0;k=0}if(k>0&&k<_)for(let A=1;A<=k;A++)y[u-A]=0;let p=0,m=0;for(let A=0;A<u;A++)y[A]===0?m++:(m>p&&(p=m),m=0);m>p&&(p=m);const x=p*(f/1e3),S=y.indexOf(1),w=y.lastIndexOf(1);let I=0,R=0;return S===-1?(I=r/i,R=r/i):(I=S*(f/1e3),R=(u-1-w)*(f/1e3)),{leadingSilence:I,trailingSilence:R,longestSilence:x}}async estimateReverb(e,t,r,i,o){const c=Math.floor(i*.02),d=-25;let v=[];const f=e[0];let g=0;for(let _=0;_<r-1024;_+=1024){let y=0;for(let p=_;p<_+1024;p++)y+=f[p]*f[p];const k=Math.sqrt(y/1024);if(k>g*1.5&&k>.01){let p=0,m=_;for(let S=_;S<_+1024;S++)Math.abs(f[S])>p&&(p=Math.abs(f[S]),m=S);const x=20*Math.log10(p);if(x>o+10){let S=-1;for(let w=m;w<r-c;w+=c){let I=0;for(let F=w;F<w+c;F++)I+=f[F]*f[F];const R=Math.sqrt(I/c);if((R>0?20*Math.log10(R):-120)<x+d){S=w;break}}if(S!==-1){const w=(S-m)/i;if(w>0){const I=w*(60/Math.abs(d));v.push(I)}}}}g=k}if(v.length<1)return 0;v.sort((_,y)=>_-y);const u=Math.floor(v.length/2);return v.length%2!==0?v[u]:(v[u-1]+v[u])/2}async analyzeNoiseFloorHistogram(e,t,r){const o=new Array(100).fill(0),s=-100,l=100,a=Math.floor(44100*.05);for(let f=0;f<t;f++){const g=e[f];for(let u=0;u<r;u+=a){const h=Math.min(u+a,r);let _=0;for(let p=u;p<h;p++)_+=g[p]*g[p];const y=Math.sqrt(_/(h-u)),k=y>0?20*Math.log10(y):s;if(k>=s){const p=Math.min(Math.floor((k-s)/l*100),99);o[p]++}}}let c=-1,d=0;for(let f=0;f<100;f++)o[f]>d&&(d=o[f],c=f);return c===-1?-1/0:c*(l/100)+s}async analyzeNoiseFloor(e,t,r,i){const o=Math.floor(r/100),s=[];for(let v=0;v<t;v++){const f=e[v];for(let g=0;g<r-o;g+=o){let u=0;for(let _=g;_<g+o&&_<r;_++)u+=f[_]*f[_];const h=Math.sqrt(u/o);s.push(h)}}s.sort((v,f)=>v-f);const l=Math.floor(s.length*.2),a=s.slice(0,l),c=a.reduce((v,f)=>v+f,0)/a.length;return c>0?20*Math.log10(c):-1/0}checkNormalization(e){let i,o;return Math.abs(e- -6)<=.1?(i="normalized",o="Properly normalized"):e>-6?(i="too_loud",o="Too loud"):(i="too_quiet",o="Too quiet"),{status:i,message:o,peakDb:e,targetDb:-6}}cancelAnalysis(){this.analysisInProgress=!1}analyzeStereoSeparation(e){if(e.numberOfChannels!==2)return null;const t=e.getChannelData(0),r=e.getChannelData(1),i=e.sampleRate,o=e.length,s=Math.floor(i*.25),l=1.1,a=.001;let c=0,d=0,v=0,f=0,g=0;for(let m=0;m<o;m+=s){let x=0,S=0;const w=Math.min(m+s,o),I=w-m;for(let $=m;$<w;$++)x+=t[$]*t[$],S+=r[$]*r[$];const R=Math.sqrt(x/I),A=Math.sqrt(S/I);if(g++,R<a&&A<a){f++;continue}const F=R/A;F>l?c++:F<1/l?d++:v++}const u=g-f;let h="Undetermined",_=0,y=0,k=0,p=0;return u>0?(p=v/u,y=c/u,k=d/u,p>.9?(h="Mono as Stereo",_=p):y>.1&&k>.1?(h="Conversational Stereo",_=y+k):y>.9?(h="Mono in Left Channel",_=y):k>.9?(h="Mono in Right Channel",_=k):(h="Mixed Stereo",_=1-p)):(h="Silent",_=1),{totalBlocks:g,activeBlocks:u,silentBlocks:f,leftDominantBlocks:c,rightDominantBlocks:d,balancedBlocks:v,stereoType:h,stereoConfidence:Math.min(_,1)}}analyzeMicBleed(e){if(e.numberOfChannels!==2)return null;const t=e.getChannelData(0),r=e.getChannelData(1),i=e.sampleRate,o=e.length,s=Math.floor(i*.25),l=1.5,a=.001,c=15,d=[],v=[],f=[],g=[];for(let w=0;w<o;w+=s){let I=0,R=0;const A=Math.min(w+s,o),F=A-w;for(let G=w;G<A;G++)I+=t[G]*t[G],R+=r[G]*r[G];const $=Math.sqrt(I/F),U=Math.sqrt(R/F);if($<a&&U<a)continue;const se=$/U;if(se>l){const G=20*Math.log10($),L=U>0?20*Math.log10(U):-1/0,W=G-L;v.push(U),f.push(W),W<c&&g.push({startSample:w,endSample:A,dominantChannel:"left",separation:W,dominantRms:$,bleedRms:U})}else if(se<1/l){const G=20*Math.log10(U),L=$>0?20*Math.log10($):-1/0,W=G-L;d.push($),f.push(W),W<c&&g.push({startSample:w,endSample:A,dominantChannel:"right",separation:W,dominantRms:U,bleedRms:$})}}const u=w=>{if(w.length===0)return-1/0;const R=w.reduce((A,F)=>A+F,0)/w.length;return 20*Math.log10(R)},h=u(d),_=u(v);let y=-1/0,k=-1/0,p=0;if(f.length>0){const w=[...f].sort((F,$)=>F-$),I=Math.floor(w.length/2);y=w.length%2!==0?w[I]:(w[I-1]+w[I])/2;const R=Math.floor(w.length*.1);k=w[R],p=f.filter(F=>F<15).length/f.length*100}const m=[],x=.3;for(const w of g){const I=this.calculateCrossCorrelation(t,r,w.startSample,w.endSample,w.dominantChannel);I>x&&m.push({...w,correlation:I,timestamp:w.startSample/i})}const S=f.length>0?m.length/f.length*100:0;return{old:{leftChannelBleedDb:h,rightChannelBleedDb:_,leftBleedSamples:d.length,rightBleedSamples:v.length},new:{medianSeparation:y,p10Separation:k,percentagePoorSeparation:p,percentageConfirmedBleed:S,totalBlocks:f.length,concerningBlocks:g.length,confirmedBleedBlocks:m.length,worstBlocks:m.slice(0,5)}}}calculateCrossCorrelation(e,t,r,i,o){const s=i-r;let l=0,a=0;for(let h=r;h<i;h++)o==="left"?(l+=e[h],a+=t[h]):(l+=t[h],a+=e[h]);const c=l/s,d=a/s;let v=0,f=0,g=0;for(let h=r;h<i;h++){const _=o==="left"?e[h]:t[h],y=o==="left"?t[h]:e[h],k=_-c,p=y-d;v+=k*p,f+=k*k,g+=p*p}const u=Math.sqrt(f*g);return u===0?0:Math.abs(v/u)}}var ts=q('<div class="error-message svelte-ujtmwg"> </div>'),ns=q('<div class="processing-indicator svelte-ujtmwg">Processing file...</div>'),rs=q("<!> <!>",1),is=q('<div class="local-file-tab svelte-ujtmwg"><!> <div class="options svelte-ujtmwg"><label class="svelte-ujtmwg"><input type="checkbox" class="svelte-ujtmwg"/> Metadata Only (skip audio analysis for faster processing)</label></div> <!> <!> <!></div>');function os(n,e){rt(e,!1);let t=ke(!1),r=ke(""),i=ke(!1),o=ke(null),s=ke(null);const l=new Qo,a=new es;async function c(x){const w=x.target?.files?.[0];if(w){j(t,!0),j(r,""),j(o,null),j(s,null);try{const I=await l.analyzeFile(w);let R=null;if(!E(i)){const A=new(window.AudioContext||window.webkitAudioContext),F=await w.arrayBuffer(),$=await A.decodeAudioData(F);R=await a.analyzeAudioBuffer($)}j(o,{filename:w.name,status:"pass",fileSize:w.size,...I,...R||{}})}catch(I){j(r,I instanceof Error?I.message:"Unknown error occurred"),j(o,null)}finally{j(t,!1)}}}Gt();var d=is(),v=B(d);Po(v,{id:"local-file-upload",get processing(){return E(t)},accept:"audio/*",$$events:{change:c}});var f=O(v,2),g=B(f),u=B(g),h=O(f,2);{var _=x=>{var S=ts(),w=B(S);_e(()=>ie(w,E(r))),M(x,S)};N(h,x=>{E(r)&&x(_)})}var y=O(h,2);{var k=x=>{var S=ns();M(x,S)};N(y,x=>{E(t)&&x(k)})}var p=O(y,2);{var m=x=>{var S=rs(),w=Ee(S);{let A=dn(()=>[E(o)]);Yo(w,{get results(){return E(A)},mode:"single",get metadataOnly(){return E(i)}})}var I=O(w,2);{var R=A=>{Zo(A,{get validation(){return E(s)}})};N(I,A=>{E(s)&&A(R)})}M(x,S)};N(p,x=>{E(o)&&x(m)})}Io(u,()=>E(i),x=>j(i,x)),M(n,d),it()}const ss=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1",as=window.location.pathname.startsWith("/beta"),Yr=ss?"http://localhost:3000":as?"https://audio-analyzer.tinytech.site/beta":"https://audio-analyzer.tinytech.site",yn={CLIENT_ID:"708688597317-bmmrje6hqg8vo52nctned54m32q8uhsr.apps.googleusercontent.com",REDIRECT_URI:Yr,SCOPE:"https://www.googleapis.com/auth/drive.readonly https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email",DISCOVERY_DOCS:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]},ae={CLIENT_ID:"0y78slky3xitt421wmoa0fjdz6fi14hn",REDIRECT_URI:Yr,AUTHORIZATION_URL:"https://account.box.com/api/oauth2/authorize",TOKEN_URL:"https://api.box.com/oauth2/token",API_URL:"https://api.box.com/2.0",PROXY_URL:"https://box-proxy-708688597317.us-central1.run.app"};class ls{constructor(){this.isInitialized=!1,this.accessToken=null,this.codeClient=null,this.userInfo=null}async init(){if(!this.isInitialized)return new Promise((e,t)=>{this.loadGoogleAPI().then(()=>{this.initializeGIS().then(e).catch(t)}).catch(t)})}async loadGoogleAPI(){return new Promise((e,t)=>{if(window.gapi){e();return}const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.onload=()=>e(),r.onerror=()=>t(new Error("Failed to load Google API script")),document.head.appendChild(r)})}async initializeGIS(){return new Promise((e,t)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.onload=()=>{this.setupGIS().then(e).catch(t)},r.onerror=()=>t(new Error("Failed to load Google Identity Services")),document.head.appendChild(r)})}async setupGIS(){return new Promise((e,t)=>{const r=setTimeout(()=>{t(new Error("Google API setup timeout"))},1e4);window.gapi.load("client",async()=>{try{clearTimeout(r),await window.gapi.client.init({discoveryDocs:yn.DISCOVERY_DOCS}),this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:yn.CLIENT_ID,scope:yn.SCOPE,callback:i=>{if(i.error){console.error("Token response error:",i),t(new Error(`Google sign-in failed: ${i.error}`));return}this.accessToken=i.access_token;const o={access_token:i.access_token,expires_at:Date.now()+i.expires_in*1e3,scope:i.scope};localStorage.setItem("google_token",JSON.stringify(o)),e(o)}}),this.isInitialized=!0,e()}catch(i){clearTimeout(r),console.error("Google API setup error:",i);let o="Unknown setup error";i&&typeof i=="object"?o=i.message||i.error||i.details||JSON.stringify(i):i&&(o=i.toString()),t(new Error(`Failed to setup Google API: ${o}`))}})})}async signIn(){return this.isInitialized||await this.init(),new Promise((e,t)=>{try{this.tokenClient.callback=r=>{if(r.error){console.error("Token response error:",r),t(new Error(`Google sign-in failed: ${r.error}`));return}if(!(r.scope&&r.scope.includes("https://www.googleapis.com/auth/drive.readonly"))){console.warn("Drive scope not granted, retrying with consent prompt"),this.tokenClient.requestAccessToken({prompt:"consent"});return}this.accessToken=r.access_token;const o={access_token:r.access_token,expires_at:Date.now()+r.expires_in*1e3,scope:r.scope};localStorage.setItem("google_token",JSON.stringify(o)),e(o)},this.tokenClient.requestAccessToken({prompt:""})}catch(r){console.error("Google sign-in error:",r);let i="Unknown sign-in error";r&&typeof r=="object"?i=r.error||r.message||r.details||JSON.stringify(r):r&&(i=r.toString()),t(new Error(`Google sign-in failed: ${i}`))}})}async getValidToken(){const e=localStorage.getItem("google_token");if(e)try{const t=JSON.parse(e);if(t.expires_at>Date.now()+3e5)return this.accessToken=t.access_token,t}catch(t){console.warn("Invalid stored token:",t),localStorage.removeItem("google_token")}return await this.signIn()}async getUserInfo(){const e=await this.getValidToken();try{const t=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${e.access_token}`}});if(!t.ok)throw new Error(`Failed to get user info: ${t.status}`);const r=await t.json();return this.userInfo=r,r}catch(t){throw new Error(`Failed to get user info: ${t.message}`)}}async downloadFile(e){const t=await this.getValidToken();try{const r=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?fields=name,mimeType,size`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok)throw r.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive. Please sign in again and grant Drive access.")):new Error(`Failed to get file metadata: ${r.status}`);const i=await r.json(),o=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!o.ok)throw new Error(`Failed to download file: ${o.status}`);const s=await o.blob();return new File([s],i.name,{type:i.mimeType||"audio/mpeg"})}catch(r){throw new Error(`Google Drive download failed: ${r.message}`)}}async listAudioFilesInFolder(e){const t=await this.getValidToken();try{const i=["audio/mpeg","audio/wav","audio/x-wav","audio/wave","audio/flac","audio/x-flac","audio/aac","audio/mp4","audio/ogg","audio/x-m4a"].map(a=>`mimeType='${a}'`).join(" or "),o=`'${e}' in parents and (${i}) and trashed=false`,s=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(o)}&fields=files(id,name,mimeType,size,modifiedTime,videoMediaMetadata)&pageSize=1000`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!s.ok)throw s.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive folder. Please sign in again.")):new Error(`Failed to list folder contents: ${s.status}`);return(await s.json()).files||[]}catch(r){throw new Error(`Failed to list folder: ${r.message}`)}}async listFilesInFolder(e,t){const r=await this.getValidToken();try{const i=`'${e}' in parents and trashed=false`,o=await fetch(`https://www.googleapis.com/drive/v3/files?q=${encodeURIComponent(i)}&fields=files(id,name,mimeType)&pageSize=1000`,{headers:{Authorization:`Bearer ${r.access_token}`}});if(!o.ok)throw o.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive folder. Please sign in again.")):new Error(`Failed to list folder contents: ${o.status}`);const l=(await o.json()).files||[];return t?l.filter(a=>a.name.toLowerCase().endsWith(t.toLowerCase())):l}catch(i){throw new Error(`Failed to list folder: ${i.message}`)}}async downloadFileHeaders(e,t=102400){const r=await this.getValidToken();try{const i=await fetch(`https://www.googleapis.com/drive/v3/files/${e}?alt=media`,{headers:{Authorization:`Bearer ${r.access_token}`,Range:`bytes=0-${t-1}`}});if(!i.ok&&i.status!==206)throw new Error(`Failed to download file headers: ${i.status}`);return await i.blob()}catch(i){throw new Error(`Failed to download headers: ${i.message}`)}}async getFileMetadata(e){if(e.videoMediaMetadata)return e;const t=await this.getValidToken();try{const r=await fetch(`https://www.googleapis.com/drive/v3/files/${e.id}?fields=name,mimeType,size,modifiedTime,videoMediaMetadata`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(!r.ok)throw r.status===403?(this.signOut(),new Error("Insufficient permissions to access Google Drive. Please sign in again and grant Drive access.")):new Error(`Failed to get file metadata: ${r.status}`);return await r.json()}catch(r){throw new Error(`Google Drive metadata fetch failed: ${r.message}`)}}signOut(){this.accessToken&&window.google&&window.google.accounts.oauth2.revoke(this.accessToken),this.accessToken=null,localStorage.removeItem("google_token")}isSignedIn(){const e=localStorage.getItem("google_token");if(!e)return!1;try{return JSON.parse(e).expires_at>Date.now()}catch{return!1}}}class cs{constructor(){this.isInitialized=!1,this.accessToken=null,this.userInfo=null}async init(){this.isInitialized||(console.log("[Box Auth] Init started at:",new Date().toISOString()),await this.handleOAuthCallback(),console.log("[Box Auth] Init completed at:",new Date().toISOString()),this.isInitialized=!0)}async handleOAuthCallback(){const e=new URLSearchParams(window.location.search);if(e.has("code")){console.log("[Box OAuth] Callback received at:",new Date().toISOString());const t=e.get("code"),r=e.get("state"),i=localStorage.getItem("box_oauth_state");if(!i||i!==r)return console.error("OAuth state mismatch"),!1;console.log("[Box OAuth] State verified, exchanging code at:",new Date().toISOString());try{const o=await fetch(`${ae.PROXY_URL}?action=token&code=${encodeURIComponent(t)}`);if(console.log("[Box OAuth] Token exchange response at:",new Date().toISOString(),"Status:",o.status),!o.ok){const a=await o.text();throw console.error("[Box OAuth] Token exchange failed:",a),new Error(`Token exchange failed: ${o.status}`)}const s=await o.json(),l={access_token:s.access_token,refresh_token:s.refresh_token,expires_at:Date.now()+s.expires_in*1e3};return localStorage.setItem("box_token",JSON.stringify(l)),this.accessToken=s.access_token,localStorage.setItem("box_just_authenticated","true"),window.history.replaceState({},document.title,window.location.pathname),!0}catch(o){return console.error("Failed to exchange authorization code:",o),!1}}return!1}async signIn(){this.isInitialized||await this.init();const e=Math.random().toString(36).substring(2,15);localStorage.setItem("box_oauth_state",e);const t=new URL(ae.AUTHORIZATION_URL);t.searchParams.append("client_id",ae.CLIENT_ID),t.searchParams.append("response_type","code"),t.searchParams.append("redirect_uri",ae.REDIRECT_URI),t.searchParams.append("state",e),window.location.href=t.toString()}async getValidToken(){const e=localStorage.getItem("box_token");if(e)try{const t=JSON.parse(e);if(t.expires_at>Date.now()+3e5)return this.accessToken=t.access_token,t}catch(t){console.warn("Invalid stored token:",t),localStorage.removeItem("box_token")}throw new Error("Not signed in to Box")}async getUserInfo(){const e=await this.getValidToken();try{const t=await fetch(`${ae.API_URL}/users/me`,{headers:{Authorization:`Bearer ${e.access_token}`}});if(!t.ok)throw new Error(`Failed to get user info: ${t.status}`);const r=await t.json();return this.userInfo=r,r}catch(t){throw new Error(`Failed to get user info: ${t.message}`)}}async downloadFile(e,t=null){try{const r=await this.getValidToken();console.log("[Box Download] Token retrieved:",r?"Yes":"No","Expires at:",new Date(r.expires_at).toISOString());const i={Authorization:`Bearer ${r.access_token}`};console.log("[Box Download] Fetching metadata for file:",e);const o=await fetch(`${ae.API_URL}/files/${e}`,{headers:i});if(!o.ok){const c=await o.text();throw console.error("[Box Download] Metadata fetch failed:",o.status,c),o.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to get file metadata: ${o.status}`)}const s=await o.json();console.log("[Box Download] Metadata retrieved:",s.name),console.log("[Box Download] Downloading file content...");const l=await fetch(`${ae.API_URL}/files/${e}/content`,{headers:i});if(!l.ok){const c=await l.text();throw console.error("[Box Download] File download failed:",l.status,c),new Error(`Failed to download file: ${l.status}`)}const a=await l.blob();return new File([a],s.name,{type:s.content_type||"audio/mpeg"})}catch(r){throw new Error(`Box download failed: ${r.message}`)}}async listAudioFilesInFolder(e,t=null){try{const r=`${ae.API_URL}/folders/${e}/items?fields=id,name,type,size,modified_at&limit=1000`;let i=`${ae.PROXY_URL}?url=${encodeURIComponent(r)}`;if(t)i+=`&boxapi=${encodeURIComponent(t)}`;else{const d=await this.getValidToken();i+=`&token=${encodeURIComponent(d.access_token)}`}const o=await fetch(i);if(!o.ok)throw!t&&o.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to list folder contents: ${o.status}`);const l=(await o.json()).entries||[],a=[".mp3",".wav",".flac",".aac",".m4a",".ogg"];return l.filter(d=>{if(d.type!=="file")return!1;const v=d.name.toLowerCase();return a.some(f=>v.endsWith(f))})}catch(r){throw new Error(`Failed to list folder: ${r.message}`)}}async listFilesInFolder(e,t,r=null){try{const i={};if(r)i.BoxApi=`shared_link=${r}`;else{const c=await this.getValidToken();i.Authorization=`Bearer ${c.access_token}`}const o=await fetch(`${ae.API_URL}/folders/${e}/items?fields=id,name,type&limit=1000`,{headers:i});if(!o.ok)throw!r&&o.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to list folder contents: ${o.status}`);let a=((await o.json()).entries||[]).filter(c=>c.type==="file");return t&&(a=a.filter(c=>c.name.toLowerCase().endsWith(t.toLowerCase()))),a}catch(i){throw new Error(`Failed to list folder: ${i.message}`)}}async downloadFileHeaders(e,t=102400,r=null){try{const i={Range:`bytes=0-${t-1}`};if(r)i.BoxApi=`shared_link=${r}`;else{const s=await this.getValidToken();i.Authorization=`Bearer ${s.access_token}`}const o=await fetch(`${ae.API_URL}/files/${e}/content`,{headers:i});if(!o.ok&&o.status!==206)throw new Error(`Failed to download file headers: ${o.status}`);return await o.blob()}catch(i){throw new Error(`Failed to download headers: ${i.message}`)}}async getFileMetadata(e,t=null){try{const r={};if(t)r.BoxApi=`shared_link=${t}`;else{const o=await this.getValidToken();r.Authorization=`Bearer ${o.access_token}`}const i=await fetch(`${ae.API_URL}/files/${e.id}?fields=id,name,size,modified_at,content_type`,{headers:r});if(!i.ok)throw!t&&i.status===401?(this.signOut(),new Error("Session expired. Please sign in again.")):new Error(`Failed to get file metadata: ${i.status}`);return await i.json()}catch(r){throw new Error(`Box metadata fetch failed: ${r.message}`)}}signOut(){this.accessToken=null,this.userInfo=null,localStorage.removeItem("box_token"),localStorage.removeItem("box_oauth_state")}isSignedIn(){const e=localStorage.getItem("box_token");if(!e)return!1;try{return JSON.parse(e).expires_at>Date.now()}catch{return!1}}}class Ne{constructor(){this.authStateStore=Wn({google:{isAuthenticated:!1,isInitialized:!1,userInfo:null,error:null},box:{isAuthenticated:!1,isInitialized:!1,error:null}}),this.googleAuth=new ls,this.boxAuth=new cs,this.authState={subscribe:e=>this.authStateStore.subscribe(e)},this.isGoogleAuthenticated=bn(this.authStateStore,e=>e.google.isAuthenticated),this.isBoxAuthenticated=bn(this.authStateStore,e=>e.box.isAuthenticated),this.googleUserInfo=bn(this.authStateStore,e=>e.google.userInfo),this.initialize()}static getInstance(){return Ne.instance||(Ne.instance=new Ne),Ne.instance}async initialize(){try{if(await this.googleAuth.init(),this.updateGoogleState({isInitialized:!0}),this.googleAuth.isSignedIn()){const e=await this.googleAuth.getUserInfo();this.updateGoogleState({isAuthenticated:!0,userInfo:e})}}catch(e){console.error("Failed to initialize Google auth:",e),this.updateGoogleState({error:e instanceof Error?e:new Error(String(e))})}try{await this.boxAuth.init(),this.updateBoxState({isInitialized:!0}),this.boxAuth.isSignedIn()&&this.updateBoxState({isAuthenticated:!0})}catch(e){console.error("Failed to initialize Box auth:",e),this.updateBoxState({error:e instanceof Error?e:new Error(String(e))})}}async signInGoogle(){try{await this.googleAuth.signIn();const e=await this.googleAuth.getUserInfo();this.updateGoogleState({isAuthenticated:!0,userInfo:e,error:null})}catch(e){const t=e instanceof Error?e:new Error(String(e));throw this.updateGoogleState({error:t}),t}}async signOutGoogle(){try{await this.googleAuth.signOut(),this.updateGoogleState({isAuthenticated:!1,userInfo:null,error:null})}catch(e){const t=e instanceof Error?e:new Error(String(e));throw this.updateGoogleState({error:t}),t}}async signInBox(){try{await this.boxAuth.signIn(),this.updateBoxState({isAuthenticated:!0,error:null})}catch(e){const t=e instanceof Error?e:new Error(String(e));throw this.updateBoxState({error:t}),t}}async signOutBox(){try{await this.boxAuth.signOut(),this.updateBoxState({isAuthenticated:!1,error:null})}catch(e){const t=e instanceof Error?e:new Error(String(e));throw this.updateBoxState({error:t}),t}}getGoogleAuthInstance(){return this.googleAuth}getBoxAuthInstance(){return this.boxAuth}isGoogleAuthenticatedSync(){return this.googleAuth.isSignedIn()}isBoxAuthenticatedSync(){return this.boxAuth.isSignedIn()}updateGoogleState(e){this.authStateStore.update(t=>({...t,google:{...t.google,...e}}))}updateBoxState(e){this.authStateStore.update(t=>({...t,box:{...t.box,...e}}))}resetState(){this.authStateStore.set({google:{isAuthenticated:!1,isInitialized:!1,userInfo:null,error:null},box:{isAuthenticated:!1,isInitialized:!1,error:null}})}}let Sn=null;function Jr(){return Sn||(Sn=Ne.getInstance()),Sn}Jr();const Kr={subscribe:n=>Jr().authState.subscribe(n)};var us=q('<div class="user-info svelte-6mpjkk"><span class="user-email svelte-6mpjkk"> </span></div> <button class="secondary svelte-6mpjkk">Sign Out</button>',1),fs=q('<p>Sign in to access your Google Drive files</p> <button class="svelte-6mpjkk">Sign in with Google</button>',1),ds=q('<div class="placeholder svelte-6mpjkk"><h3>Google Drive File Analysis</h3> <p>Full Google Drive integration will be implemented in Phase 5.5+</p> <p style="margin-top: 1rem;">This will include: <br/>• Browse and select files from Google Drive <br/>• Batch processing of folders <br/>• Direct file URL input</p></div>'),hs=q('<div class="google-drive-tab svelte-6mpjkk"><div class="auth-section svelte-6mpjkk"><h3>Google Drive Authentication</h3> <!></div> <!></div>');function vs(n,e){rt(e,!1);const t=()=>gn(Kr,"$authState",r),[r,i]=pn(),o=Ae.getInstance();function s(){o.dispatch({type:"auth:google:signin:requested"})}function l(){o.dispatch({type:"auth:google:signout:requested"})}Gt();var a=hs(),c=B(a),d=O(B(c),2);{var v=h=>{var _=us(),y=Ee(_),k=B(y),p=B(k),m=O(y,2);_e(()=>ie(p,`✅ Signed in as ${t().google.userInfo?.email??""}`)),Be("click",m,l),M(h,_)},f=h=>{var _=fs(),y=O(Ee(_),2);Be("click",y,s),M(h,_)};N(d,h=>{t().google.isAuthenticated?h(v):h(f,!1)})}var g=O(c,2);{var u=h=>{var _=ds();M(h,_)};N(g,h=>{t().google.isAuthenticated&&h(u)})}M(n,a),it(),i()}var gs=q('<div class="user-info svelte-1ttt140"><span>✅ Signed in to Box</span></div> <button class="secondary svelte-1ttt140">Sign Out</button>',1),ps=q('<p>Sign in to access your Box files</p> <button class="svelte-1ttt140">Sign in with Box</button>',1),_s=q('<div class="placeholder svelte-1ttt140"><h3>Box File Analysis</h3> <p>Full Box integration will be implemented in Phase 5.5+</p> <p style="margin-top: 1rem;">This will include: <br/>• Browse and select files from Box <br/>• Batch processing of folders <br/>• Direct shared link input</p></div>'),ms=q('<div class="box-tab svelte-1ttt140"><div class="auth-section svelte-1ttt140"><h3>Box Authentication</h3> <!></div> <!></div>');function ws(n,e){rt(e,!1);const t=()=>gn(Kr,"$authState",r),[r,i]=pn(),o=Ae.getInstance();function s(){o.dispatch({type:"auth:box:signin:requested"})}function l(){o.dispatch({type:"auth:box:signout:requested"})}Gt();var a=ms(),c=B(a),d=O(B(c),2);{var v=h=>{var _=gs(),y=O(Ee(_),2);Be("click",y,l),M(h,_)},f=h=>{var _=ps(),y=O(Ee(_),2);Be("click",y,s),M(h,_)};N(d,h=>{t().box.isAuthenticated?h(v):h(f,!1)})}var g=O(c,2);{var u=h=>{var _=_s();M(h,_)};N(g,h=>{t().box.isAuthenticated&&h(u)})}M(n,a),it(),i()}var bs=q('<div class="settings-tab svelte-1102y3w"><div class="placeholder svelte-1102y3w"><h3>Settings & Criteria Configuration</h3> <p>Settings management will be implemented in Phase 5.5+</p> <p style="margin-top: 1rem;">This will include: <br/>• Preset selection (Auditions, P2B2, Three Hour, Bilingual, etc.) <br/>• Custom criteria configuration <br/>• Advanced analysis options <br/>• Theme preferences</p></div></div>');function ys(n){var e=bs();M(n,e)}var Ss=q('<div class="app sv-app svelte-nejbyb"><header class="header svelte-nejbyb"><div class="header-content svelte-nejbyb"><div class="header-spacer svelte-nejbyb"></div> <h1 class="logo svelte-nejbyb">🎵 Audio Analyzer</h1> <button class="dark-mode-toggle svelte-nejbyb" aria-label="Toggle dark mode"><span class="light-icon svelte-nejbyb">🌙</span> <span class="dark-icon svelte-nejbyb">☀️</span></button></div></header> <main class="main svelte-nejbyb"><div class="container svelte-nejbyb"><!> <!></div></main> <footer class="footer svelte-nejbyb"><div class="container svelte-nejbyb"><p id="buildInfo" class="svelte-nejbyb">Audio Analyzer - Phase 5.4 Tab Migration</p></div></footer></div>');function ks(n){const e=()=>gn($n,"$currentTab",t),[t,r]=pn();function i(){const h=document.documentElement,_=h.getAttribute("data-theme")==="dark";h.setAttribute("data-theme",_?"light":"dark"),localStorage.setItem("theme",_?"light":"dark")}if(typeof window<"u"){const h=localStorage.getItem("theme");h&&document.documentElement.setAttribute("data-theme",h)}var o=Ss(),s=B(o),l=B(s),a=O(B(l),4),c=O(s,2),d=B(c),v=B(d);Oo(v,{});var f=O(v,2);{var g=h=>{os(h,{})},u=h=>{var _=Xt(),y=Ee(_);{var k=m=>{vs(m,{})},p=m=>{var x=Xt(),S=Ee(x);{var w=R=>{ws(R,{})},I=R=>{var A=Xt(),F=Ee(A);{var $=U=>{ys(U)};N(F,U=>{e()==="settings"&&U($)},!0)}M(R,A)};N(S,R=>{e()==="box"?R(w):R(I,!1)},!0)}M(m,x)};N(y,m=>{e()==="googleDrive"?m(k):m(p,!1)},!0)}M(h,_)};N(f,h=>{e()==="local"?h(g):h(u,!1)})}Be("click",a,i),M(n,o),r()}class Es{constructor(){this.unsubscribers=[],this.bridge=Ae.getInstance(),this.authService=Ne.getInstance(),this.attachEventListeners()}attachEventListeners(){this.unsubscribers.push(this.bridge.on("auth:google:signin:requested",()=>this.handleGoogleSignIn())),this.unsubscribers.push(this.bridge.on("auth:google:signout:requested",()=>this.handleGoogleSignOut())),this.unsubscribers.push(this.bridge.on("auth:box:signin:requested",()=>this.handleBoxSignIn())),this.unsubscribers.push(this.bridge.on("auth:box:signout:requested",()=>this.handleBoxSignOut())),this.unsubscribers.push(this.bridge.on("file:local:selected",e=>{console.log("[ServiceCoordinator] File selected:",e.file.name)})),this.unsubscribers.push(this.bridge.on("file:drive:requested",e=>{console.log("[ServiceCoordinator] Google Drive file requested:",e.url)})),this.unsubscribers.push(this.bridge.on("file:box:requested",e=>{console.log("[ServiceCoordinator] Box file requested:",e.url)}))}async handleGoogleSignIn(){try{await this.authService.signInGoogle();const t=await this.authService.getGoogleAuthInstance().getUserInfo();this.bridge.dispatch({type:"auth:google:signin:success",userInfo:t})}catch(e){this.bridge.dispatch({type:"auth:google:signin:error",error:e instanceof Error?e:new Error(String(e))})}}async handleGoogleSignOut(){try{await this.authService.signOutGoogle(),this.bridge.dispatch({type:"auth:google:signout:success"})}catch(e){this.bridge.dispatch({type:"auth:google:signout:error",error:e instanceof Error?e:new Error(String(e))})}}async handleBoxSignIn(){try{await this.authService.signInBox(),this.bridge.dispatch({type:"auth:box:signin:success"})}catch(e){this.bridge.dispatch({type:"auth:box:signin:error",error:e instanceof Error?e:new Error(String(e))})}}async handleBoxSignOut(){try{await this.authService.signOutBox(),this.bridge.dispatch({type:"auth:box:signout:success"})}catch(e){this.bridge.dispatch({type:"auth:box:signout:error",error:e instanceof Error?e:new Error(String(e))})}}destroy(){this.unsubscribers.forEach(e=>e()),this.unsubscribers=[]}}new Es;po(ks,{target:document.getElementById("app")});
